<!doctype html><html><head><meta charset=UTF-8><title>RUYAX</title><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=no,viewport-fit=cover"><style>.action-btn,.post-info p{font-size:14px}#bottom-nav,.page-overlay{position:fixed;background-color:var(--dark-gray)}#nav-upload-btn,.action-btn,body,html{color:var(--text-color)}#comments-overlay,.page-overlay{width:100%;transition:transform .3s ease-in-out}#uploadProgressBar,.toast{box-shadow:0 4px 12px rgba(0,0,0,.6)}.post-actions,.post-info,.sent{align-self:flex-end}:root{--primary-color:#e91e63;--background-color:#000;--text-color:#fff;--text-color-secondary:#ccc;--dark-gray:#121212;--medium-gray:#1a1a1a;--light-gray:#282828;--font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;--bottom-nav-height:60px}*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}body,html{height:100%;width:100%;overflow:hidden;background-color:var(--background-color);font-family:var(--font-family)}#app-container{height:100vh;width:100%;position:relative}.page-overlay{top:0;left:0;height:100%;z-index:1500;transform:translateX(100%);overflow-y:auto;padding-bottom:var(--bottom-nav-height)}.action-btn,.nav-btn{background:0 0;cursor:pointer}html[dir=rtl] .page-overlay{transform:translateX(-100%)}.page-overlay.active{transform:translateX(0)}.page-content{padding:20px 15px}h2,h3{color:var(--primary-color);margin-bottom:15px}.page-content p{line-height:1.6;color:var(--text-color-secondary);margin-bottom:10px}.action-btn.liked,.nav-btn.active,.page-content a{color:var(--primary-color)}.page-content a{text-decoration:none}#feed{height:100%;overflow-y:scroll;scroll-snap-type:y mandatory;-webkit-overflow-scrolling:touch;background:var(--background-color)}.post{height:100vh;width:100%;scroll-snap-align:start;position:relative;display:flex;justify-content:center;align-items:center;overflow:hidden}.media-item img,.media-item video,.post img,.post video{width:100%;height:100%;object-fit:contain}#post-ui-overlay{position:fixed;bottom:var(--bottom-nav-height);left:0;right:0;top:0;pointer-events:none;display:flex;justify-content:space-between;padding:15px}.post-info{text-shadow:1px 1px 3px rgba(0,0,0,.7);pointer-events:auto}.post-info h3{margin:0 0 5px;color:#fff;cursor:pointer}.post-actions{display:flex;flex-direction:column;gap:20px;align-items:center}.action-btn{border:none;display:flex;flex-direction:column;align-items:center;gap:5px;text-shadow:1px 1px 3px rgba(0,0,0,.5);pointer-events:auto;transition:transform .2s,color .2s}.action-btn:active{transform:scale(1.1)}.action-btn svg{width:32px;height:32px;fill:currentColor;filter:drop-shadow(0 2px 2px rgba(0,0,0,.5))}.action-btn .avatar-img{width:45px;height:45px;border-radius:50%;border:2px solid var(--text-color);object-fit:cover}.heart-anim{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:100px;color:rgba(255,255,255,.9);opacity:0;animation:.6s pop;pointer-events:none}#notif-badge,.nav-btn{font-size:10px;display:flex}.comment-item strong,.comments-header,.nav-btn{color:var(--text-color-secondary)}@keyframes pop{0%{opacity:0;transform:translate(-50%,-50%) scale(.5)}50%{opacity:1;transform:translate(-50%,-50%) scale(1.2)}100%{opacity:0;transform:translate(-50%,-50%) scale(1)}}#bottom-nav{bottom:0;left:0;width:100%;height:var(--bottom-nav-height);border-top:1px solid var(--light-gray);display:flex;justify-content:space-around;align-items:center;z-index:1600}.nav-btn{border:none;flex-direction:column;align-items:center;gap:4px;transition:color .2s;flex:1;height:100%;justify-content:center}.nav-btn svg{width:24px;height:24px;fill:currentColor}#nav-upload-btn div{background-color:var(--primary-color);border-radius:12px;padding:5px 10px;display:flex;align-items:center;justify-content:center}#nav-upload-btn div svg{width:28px;height:28px}.nav-btn-wrapper{position:relative}#notif-badge{position:absolute;top:-5px;right:-8px;background:red;color:#fff;border-radius:50%;width:18px;height:18px;justify-content:center;align-items:center;border:1px solid var(--dark-gray)}#comments-overlay{position:fixed;bottom:0;left:0;height:50%;background:var(--dark-gray);border-top-left-radius:20px;border-top-right-radius:20px;transform:translateY(100%);z-index:1700;display:flex;flex-direction:column;padding:10px}#comments-overlay.show{transform:translateY(0)}.comments-header{text-align:center;padding:5px}.comments-list{flex:1;overflow-y:auto;padding:10px}.comment-item{display:flex;gap:10px;margin-bottom:15px}.comment-item img{width:32px;height:32px;border-radius:50%;object-fit:cover}.comment-item strong{font-size:13px}.add-comment button,.add-comment input,.btn-primary,.btn-secondary,.profile-header h3{color:var(--text-color)}.comment-item p{font-size:15px;margin:0}.add-comment{display:flex;gap:10px;padding-top:10px;border-top:1px solid var(--light-gray)}.add-comment input{flex:1;background:var(--light-gray);border:none;border-radius:20px;padding:10px 15px}.add-comment button,.btn{border:none;cursor:pointer}.add-comment button{background:var(--primary-color);border-radius:50%;width:40px;height:40px;flex-shrink:0}.modal,.modal-buttons{justify-content:center}.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);display:none;align-items:center;z-index:2000;padding:15px}#editProfileModal .modal-content,#search-page input,.modal-content,.notification-list .item{background:var(--medium-gray)}.modal.show{display:flex}.modal-content{padding:20px;border-radius:12px;text-align:center;width:100%;max-width:400px}#progressBarFill,.btn-primary{background:var(--primary-color)}.modal-content input,.modal-content select,.modal-content textarea{width:100%;padding:10px;margin-top:10px;border-radius:8px;border:1px solid var(--light-gray);background:var(--dark-gray);color:var(--text-color)}.modal-buttons{display:flex;gap:8px;margin-top:20px}.btn{padding:10px 20px;border-radius:20px;font-weight:700}.btn-secondary{background:var(--light-gray)}.social-login{display:flex;justify-content:center;gap:10px;margin-top:15px}.social-login button{border:none;border-radius:6px;cursor:pointer;padding:8px 12px;display:flex;align-items:center;gap:5px}.google-btn{background:#fff;color:#000}.media-item,.notification-list .item:hover,.toast{background:var(--light-gray)}.small-icon{width:18px;height:18px}.profile-header{display:flex;flex-direction:column;align-items:center;gap:10px;padding-bottom:20px}.profile-header-top{display:flex;align-items:center;gap:30px;margin-bottom:10px}.profile-header img{width:90px;height:90px;border-radius:50%;object-fit:cover;border:3px solid var(--primary-color)}.profile-header h3{margin:5px 0 0}.profile-header p{color:var(--text-color-secondary);font-size:14px;margin:0}.profile-actions{display:flex;gap:10px;margin-top:10px;flex-wrap:wrap;justify-content:center}.media-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:5px}.media-item{position:relative;border-radius:8px;overflow:hidden;cursor:pointer;aspect-ratio:1/1}.media-actions{position:absolute;top:5px;right:5px;display:flex;gap:5px}#uploadProgressBar,.toast-container{position:fixed;top:20px;left:50%;transform:translateX(-50%)}.media-actions button{background:rgba(0,0,0,.6);border:none;color:#fff;padding:5px;border-radius:50%;cursor:pointer;font-size:12px;line-height:1;display:flex;align-items:center;justify-content:center;width:24px;height:24px}#search-page input{width:100%;padding:12px 15px;font-size:16px;border-radius:25px;border:none;outline:0;color:#fff;margin-bottom:15px}.notification-list .item{padding:15px;border-radius:8px;margin-bottom:10px;cursor:pointer;transition:background .2s}.toast-container{z-index:3000;display:flex;flex-direction:column;gap:10px;align-items:center}.toast{padding:10px 16px;border-radius:20px;color:#fff;font-size:14px}#uploadProgressBar{display:none;width:80%;max-width:400px;background:#333;border-radius:8px;z-index:3001;padding:10px}#progressMessage{color:#fff;text-align:center;margin-bottom:8px;font-size:14px}#progressBarFill{width:0%;height:10px;border-radius:5px;transition:width .3s}#chatMessages{display:flex;flex-direction:column;gap:8px;padding:10px}.chat-message{padding:8px 12px;border-radius:18px;max-width:75%;word-wrap:break-word}.sent{background-color:var(--primary-color);color:#fff}.received,html[dir=rtl] .sent{align-self:flex-start}.received{background-color:var(--light-gray);color:#fff}html[dir=rtl] .received{align-self:flex-end}.hidden{display:none!important}.profile-stats{display:flex;gap:20px;justify-content:center}.stat-btn{background:0 0;border:none;color:var(--text-color);cursor:pointer;display:flex;flex-direction:column;align-items:center;font-size:14px;gap:4px}.stat-btn strong{font-size:18px;font-weight:700}.stat-btn:disabled{opacity:.6;cursor:not-allowed}.report-item .status{padding:3px 8px;border-radius:12px;font-size:12px;font-weight:700}.report-item .status-pending{background-color:#f39c12;color:#fff}.report-item .status-in_review{background-color:#3498db;color:#fff}.report-item .status-resolved{background-color:#2ecc71;color:#fff}#reportDetailModal .modal-content{text-align:left}#reportDetailModal h3{text-align:center}#reportDetailModal p{margin-bottom:5px}#reportDetailModal strong{color:var(--primary-color)}#reportDetailModal .report-reason-box{background:var(--dark-gray);padding:10px;border-radius:8px;margin-top:10px;border:1px solid var(--light-gray);min-height:60px}#reportDetailModal .admin-section{border-top:1px solid var(--light-gray);margin-top:20px;padding-top:15px}.video-indicator{position:absolute;top:8px;left:8px;width:20px;height:20px;fill:#fff;filter:drop-shadow(0 1px 2px rgba(0,0,0,.7));pointer-events:none}.media-item-title{position:absolute;bottom:0;left:0;right:0;padding:12px 8px 6px;background:linear-gradient(to top,rgba(0,0,0,.8) 0%,rgba(0,0,0,0) 100%);color:#fff;font-size:12px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-shadow:1px 1px 2px rgba(0,0,0,.6);pointer-events:none}.media-item-views{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background-color:rgba(0,0,0,.6);color:#fff;padding:4px 8px;border-radius:12px;display:flex;align-items:center;gap:5px;font-size:13px;font-weight:700;pointer-events:none;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.media-item-views svg{width:16px;height:16px;fill:currentColor}#privacy-toast{position:fixed;bottom:calc(var(--bottom-nav-height) + 15px);left:15px;right:15px;background-color:rgba(40,40,40,.85);-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);color:var(--text-color-secondary);padding:12px;border-radius:12px;z-index:1550;text-align:center;font-size:14px;cursor:pointer;border:1px solid var(--light-gray);transition:opacity .4s ease,transform .4s ease;transform:translateY(20px);opacity:0;pointer-events:none}#privacy-toast.show{transform:translateY(0);opacity:1;pointer-events:auto}#privacy-toast p strong{color:var(--primary-color);font-weight:700;text-decoration:underline}.profile-extra-info{font-size:13px;color:var(--text-color-secondary);display:flex;gap:15px;margin-top:8px;justify-content:center;align-items:center;flex-wrap:wrap}.privacy-settings-group{margin-top:20px;padding-top:15px;border-top:1px solid var(--light-gray);text-align:left}.privacy-settings-group legend{padding:0 5px;font-weight:700;color:var(--text-color-secondary);margin-bottom:10px}.privacy-setting-item{display:flex;align-items:center;gap:8px;margin-bottom:8px;font-size:14px}.privacy-setting-item input[type=checkbox]{width:auto;margin:0}#editProfileModal .modal-content{max-height:85vh;overflow-y:auto}</style><link rel=stylesheet href=/index.css><script type=importmap>{ "imports": { "react": "https://aistudiocdn.com/react@^19.2.0", "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/", "react/": "https://aistudiocdn.com/react@^19.2.0/", "@google/genai": "https://aistudiocdn.com/@google/genai@^1.23.0" }}</script><link rel="stylesheet" href="/index.css"></head><body><div id=root></div><main id=app-container><div id=feed></div><div id=post-ui-overlay><div class=post-info><h3 id=ui-post-author>@username</h3><p id=ui-post-title>Post Title</p></div><div class=post-actions><button class=action-btn id=ui-avatar-btn><img src=https://img.icons8.com/ios/100/user.png class=avatar-img></button><button class=action-btn id=ui-like-btn><svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path></svg><span id=ui-like-count>0</span></button><button class=action-btn id=ui-comment-btn><svg viewBox="0 0 24 24"><path d="M20 2 H4 c -1.1 0 -2 .9 -2 2 v 18 l 4 -4 h 14 c 1.1 0 2 -.9 2 -2 V 4 c 0 -1.1 -0.9 -2 -2 -2 z"></path></svg><span id=ui-comment-count>0</span></button><button class=action-btn id=ui-share-btn><svg viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"></path></svg><span id=ui-share-count>0</span></button></div></div></main><div id=privacy-toast><p><span data-translate-key=privacy_toast_text></span><strong data-translate-key=privacy_policy></strong></p></div><section id=search-page class=page-overlay><div class=page-content><input id=searchInput data-translate-placeholder=search_placeholder><div id=searchResults class=media-grid></div></div></section><section id=notifications-page class=page-overlay><div class=page-content><h2 data-translate-key=notifications>Notifications</h2><div id=notificationList class=notification-list></div></div></section><section id=profile-page class=page-overlay><div class=page-content><div class=profile-header><div class=profile-header-top><img id=profileAvatar src=https://img.icons8.com/ios/100/user.png alt=avatar><div class=profile-stats><button id=followersBtn class=stat-btn><strong id=followersCount>0</strong><span data-translate-key=followers>Followers</span></button><button id=notFollowingBackBtn class=stat-btn><strong id=notFollowingBackCount>0</strong><span data-translate-key=not_following_back>Not Following Back</span></button></div></div><h3 id=profileName>Username</h3><p id=profileEmail>email@example.com</p><p id=profileBio>Bio goes here...</p><div id=profileExtraInfo class=profile-extra-info></div><div id=my-profile-actions class=profile-actions><button class="btn btn-secondary" id=edit-profile-btn data-translate-key=edit_profile>Edit Profile</button><button class="btn btn-secondary" id=my-reports-btn data-translate-key=my_reports>My Reports</button><button class="btn btn-secondary" id=logout-btn data-translate-key=logout>Logout</button><button id=privacy-policy-btn class="btn btn-secondary" data-translate-key=privacy_policy>Privacy Policy</button><button class="btn btn-secondary" id="request-deletion-btn" data-translate-key="request_deletion" style="background-color: #a83232;">Request Deletion</button></div><div id=user-profile-actions class=profile-actions><button id=followBtn class="btn btn-primary" data-translate-key=follow>Follow</button><button id=messageBtn class="btn btn-secondary" data-translate-key=message>Message</button><button id=blockBtn class="btn btn-secondary" style="background-color: #a83232;" data-translate-key="block">Block</button></div></div><div id=profileMediaGrid class=media-grid></div></div></section><section id=user-list-page class=page-overlay><div class=page-content><h2 id=user-list-title></h2><div id=user-list-container class=notification-list></div></div></section><section id=reports-page class=page-overlay><div class=page-content><h2 id=reports-page-title data-translate-key=my_reports>My Reports</h2><div id=reports-list class=notification-list></div></div></section><section id=privacy-page class=page-overlay><div class=page-content><h2 data-translate-key=privacy_policy>Privacy Policy</h2><p data-translate-key=privacy_p1>This policy describes how we collect, use, and handle your information when you use our application.</p><h3 data-translate-key=privacy_h_collect>Data Collection and Use</h3><p data-translate-key=privacy_p2>When you create an account, we collect your email. You may optionally provide a display name, profile picture, and bio. We also collect content you create, like photos, videos, comments, and likes, to provide and personalize the service.</p><h3 data-translate-key=privacy_h_contact>Contact Us</h3><p data-translate-key=privacy_p3>For any questions about this Privacy Policy, you can contact the developer:</p><p><strong><span data-translate-key=developer_name>Name</span>:</strong> MOHAMED ERRAQQAD</p><p><strong><span data-translate-key=developer_email>Email</span>:</strong><a href="mailto:assylerr2021@gmail.com">dev@example.com</a></p><p><a href=https://privacy-policyap.blogspot.com/2025/10/ruyax.html?m=1 target=_blank data-translate-key=privacy_full_link>View Full Privacy Policy</a></p></div></section><nav id=bottom-nav><button class="nav-btn active" data-page=home-page><svg viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg><span data-translate-key=home>Home</span></button><button class=nav-btn data-page=search-page><svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg><span data-translate-key=search>Search</span></button><button id=nav-upload-btn class=nav-btn><div><svg viewBox="0 0 24 24" fill=currentColor><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg></div></button><button class=nav-btn data-page=notifications-page><div class=nav-btn-wrapper><svg viewBox="0 0 24 24"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg><div id=notif-badge class=hidden>0</div></div><span data-translate-key=notifications>Notifications</span></button><button class=nav-btn data-page=profile-page><svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg><span data-translate-key=profile>Profile</span></button></nav><div id=comments-overlay><h4 class=comments-header data-translate-key=comments>Comments</h4><div id=comments-list class=comments-list></div><div class=add-comment><input id=comment-input data-translate-placeholder=add_comment_placeholder><button id=send-comment-btn>➤</button></div></div><div class=modal id=loginModal><div class=modal-content><h2 data-translate-key=login_title>Login / Sign Up</h2><input id=email type=email data-translate-placeholder=email><input id=password type=password data-translate-placeholder=password><a href=# id=forgot-password-link style="font-size:12px;color:var(--text-color-secondary);display:block;margin-top:10px;text-align:right" data-translate-key=forgot_password></a><div class=privacy-agreement style="margin-top:15px;font-size:12px;text-align:left;display:flex;align-items:center;gap:8px"><input type=checkbox id=privacy-agree style="width:auto;margin:0"><label for=privacy-agree style=color:var(--text-color-secondary)><span data-translate-key=agree_to></span><a href=# id=privacy-link-in-modal style="color:var(--primary-color);text-decoration:underline"><span data-translate-key=privacy_policy></span></a></label></div><div class=modal-buttons><button id=login-btn class="btn btn-primary" data-translate-key=login>Login</button><button id=signup-btn class="btn btn-primary" data-translate-key=signup disabled>Sign Up</button><button data-modal-close=loginModal class="btn btn-secondary" data-translate-key=cancel>Cancel</button></div><div class=social-login><button class=google-btn id=google-login-btn><img class=small-icon src=https://img.icons8.com/color/48/000000/google-logo.png> Google</button></div></div></div><div class=modal id=resetPasswordModal><div class=modal-content><h3 data-translate-key=reset_password></h3><input id=reset-email type=email data-translate-placeholder=email><div class=modal-buttons><button id=send-reset-link-btn class="btn btn-primary" data-translate-key=send_reset_link></button><button data-modal-close=resetPasswordModal class="btn btn-secondary" data-translate-key=cancel></button></div></div></div><div class=modal id=additionalInfoModal><div class=modal-content><h2 data-translate-key=complete_your_profile></h2><p style="font-size:14px;color:var(--text-color-secondary);margin-bottom:15px" data-translate-key=age_requirement_info></p><label for=dob style="display:block;text-align:left;margin-bottom:5px" data-translate-key=date_of_birth></label><input id=dob type=date required><label for=gender style="display:block;text-align:left;margin-bottom:5px;margin-top:10px" data-translate-key=gender></label><select id=gender><option value="" data-translate-key=select_gender></option><option value=male data-translate-key=male></option><option value=female data-translate-key=female></option><option value=other data-translate-key=other></option><option value=prefer_not_say data-translate-key=prefer_not_say></option></select><label for=country style="display:block;text-align:left;margin-bottom:5px;margin-top:10px" data-translate-key=country></label><select id=country><option value="" data-translate-key=select_country></option><option value=AF>Afghanistan</option><option value=AX>Åland Islands</option><option value=AL>Albania</option><option value=DZ>Algeria</option><option value=AS>American Samoa</option><option value=AD>Andorra</option><option value=AO>Angola</option><option value=AI>Anguilla</option><option value=AQ>Antarctica</option><option value=AG>Antigua and Barbuda</option><option value=AR>Argentina</option><option value=AM>Armenia</option><option value=AW>Aruba</option><option value=AU>Australia</option><option value=AT>Austria</option><option value=AZ>Azerbaijan</option><option value=BS>Bahamas</option><option value=BH>Bahrain</option><option value=BD>Bangladesh</option><option value=BB>Barbados</option><option value=BY>Belarus</option><option value=BE>Belgium</option><option value=BZ>Belize</option><option value=BJ>Benin</option><option value=BM>Bermuda</option><option value=BT>Bhutan</option><option value=BO>Bolivia</option><option value=BA>Bosnia and Herzegovina</option><option value=BW>Botswana</option><option value=BV>Bouvet Island</option><option value=BR>Brazil</option><option value=IO>British Indian Ocean Territory</option><option value=BN>Brunei Darussalam</option><option value=BG>Bulgaria</option><option value=BF>Burkina Faso</option><option value=BI>Burundi</option><option value=KH>Cambodia</option><option value=CM>Cameroon</option><option value=CA>Canada</option><option value=CV>Cape Verde</option><option value=KY>Cayman Islands</option><option value=CF>Central African Republic</option><option value=TD>Chad</option><option value=CL>Chile</option><option value=CN>China</option><option value=CX>Christmas Island</option><option value=CC>Cocos (Keeling) Islands</option><option value=CO>Colombia</option><option value=KM>Comoros</option><option value=CG>Congo</option><option value=CD>Congo, The Democratic Republic of The</option><option value=CK>Cook Islands</option><option value=CR>Costa Rica</option><option value=CI>Cote D'ivoire</option><option value=HR>Croatia</option><option value=CU>Cuba</option><option value=CY>Cyprus</option><option value=CZ>Czech Republic</option><option value=DK>Denmark</option><option value=DJ>Djibouti</option><option value=DM>Dominica</option><option value=DO>Dominican Republic</option><option value=EC>Ecuador</option><option value=EG>Egypt</option><option value=SV>El Salvador</option><option value=GQ>Equatorial Guinea</option><option value=ER>Eritrea</option><option value=EE>Estonia</option><option value=ET>Ethiopia</option><option value=FK>Falkland Islands (Malvinas)</option><option value=FO>Faroe Islands</option><option value=FJ>Fiji</option><option value=FI>Finland</option><option value=FR>France</option><option value=GF>French Guiana</option><option value=PF>French Polynesia</option><option value=TF>French Southern Territories</option><option value=GA>Gabon</option><option value=GM>Gambia</option><option value=GE>Georgia</option><option value=DE>Germany</option><option value=GH>Ghana</option><option value=GI>Gibraltar</option><option value=GR>Greece</option><option value=GL>Greenland</option><option value=GD>Grenada</option><option value=GP>Guadeloupe</option><option value=GU>Guam</option><option value=GT>Guatemala</option><option value=GG>Guernsey</option><option value=GN>Guinea</option><option value=GW>Guinea-bissau</option><option value=GY>Guyana</option><option value=HT>Haiti</option><option value=HM>Heard Island and Mcdonald Islands</option><option value=VA>Holy See (Vatican City State)</option><option value=HN>Honduras</option><option value=HK>Hong Kong</option><option value=HU>Hungary</option><option value=IS>Iceland</option><option value=IN>India</option><option value=ID>Indonesia</option><option value=IR>Iran, Islamic Republic of</option><option value=IQ>Iraq</option><option value=IE>Ireland</option><option value=IM>Isle of Man</option><option value=IL>Israel</option><option value=IT>Italy</option><option value=JM>Jamaica</option><option value=JP>Japan</option><option value=JE>Jersey</option><option value=JO>Jordan</option><option value=KZ>Kazakhstan</option><option value=KE>Kenya</option><option value=KI>Kiribati</option><option value=KP>Korea, Democratic People's Republic of</option><option value=KR>Korea, Republic of</option><option value=KW>Kuwait</option><option value=KG>Kyrgyzstan</option><option value=LA>Lao People's Democratic Republic</option><option value=LV>Latvia</option><option value=LB>Lebanon</option><option value=LS>Lesotho</option><option value=LR>Liberia</option><option value=LY>Libyan Arab Jamahiriya</option><option value=LI>Liechtenstein</option><option value=LT>Lithuania</option><option value=LU>Luxembourg</option><option value=MO>Macao</option><option value=MK>Macedonia, The Former Yugoslav Republic of</option><option value=MG>Madagascar</option><option value=MW>Malawi</option><option value=MY>Malaysia</option><option value=MV>Maldives</option><option value=ML>Mali</option><option value=MT>Malta</option><option value=MH>Marshall Islands</option><option value=MQ>Martinique</option><option value=MR>Mauritania</option><option value=MU>Mauritius</option><option value=YT>Mayotte</option><option value=MX>Mexico</option><option value=FM>Micronesia, Federated States of</option><option value=MD>Moldova, Republic of</option><option value=MC>Monaco</option><option value=MN>Mongolia</option><option value=ME>Montenegro</option><option value=MS>Montserrat</option><option value=MA>Morocco</option><option value=MZ>Mozambique</option><option value=MM>Myanmar</option><option value=NA>Namibia</option><option value=NR>Nauru</option><option value=NP>Nepal</option><option value=NL>Netherlands</option><option value=AN>Netherlands Antilles</option><option value=NC>New Caledonia</option><option value=NZ>New Zealand</option><option value=NI>Nicaragua</option><option value=NE>Niger</option><option value=NG>Nigeria</option><option value=NU>Niue</option><option value=NF>Norfolk Island</option><option value=MP>Northern Mariana Islands</option><option value=NO>Norway</option><option value=OM>Oman</option><option value=PK>Pakistan</option><option value=PW>Palau</option><option value=PS>Palestinian Territory, Occupied</option><option value=PA>Panama</option><option value=PG>Papua New Guinea</option><option value=PY>Paraguay</option><option value=PE>Peru</option><option value=PH>Philippines</option><option value=PN>Pitcairn</option><option value=PL>Poland</option><option value=PT>Portugal</option><option value=PR>Puerto Rico</option><option value=QA>Qatar</option><option value=RE>Reunion</option><option value=RO>Romania</option><option value=RU>Russian Federation</option><option value=RW>Rwanda</option><option value=SH>Saint Helena</option><option value=KN>Saint Kitts and Nevis</option><option value=LC>Saint Lucia</option><option value=PM>Saint Pierre and Miquelon</option><option value=VC>Saint Vincent and The Grenadines</option><option value=WS>Samoa</option><option value=SM>San Marino</option><option value=ST>Sao Tome and Principe</option><option value=SA>Saudi Arabia</option><option value=SN>Senegal</option><option value=RS>Serbia</option><option value=SC>Seychelles</option><option value=SL>Sierra Leone</option><option value=SG>Singapore</option><option value=SK>Slovakia</option><option value=SI>Slovenia</option><option value=SB>Solomon Islands</option><option value=SO>Somalia</option><option value=ZA>South Africa</option><option value=GS>South Georgia and The South Sandwich Islands</option><option value=ES>Spain</option><option value=LK>Sri Lanka</option><option value=SD>Sudan</option><option value=SR>Suriname</option><option value=SJ>Svalbard and Jan Mayen</option><option value=SZ>Swaziland</option><option value=SE>Sweden</option><option value=CH>Switzerland</option><option value=SY>Syrian Arab Republic</option><option value=TW>Taiwan, Province of China</option><option value=TJ>Tajikistan</option><option value=TZ>Tanzania, United Republic of</option><option value=TH>Thailand</option><option value=TL>Timor-leste</option><option value=TG>Togo</option><option value=TK>Tokelau</option><option value=TO>Tonga</option><option value=TT>Trinidad and Tobago</option><option value=TN>Tunisia</option><option value=TR>Turkey</option><option value=TM>Turkmenistan</option><option value=TC>Turks and Caicos Islands</option><option value=TV>Tuvalu</option><option value=UG>Uganda</option><option value=UA>Ukraine</option><option value=AE>United Arab Emirates</option><option value=GB>United Kingdom</option><option value=US>United States</option><option value=UM>United States Minor Outlying Islands</option><option value=UY>Uruguay</option><option value=UZ>Uzbekistan</option><option value=VU>Vanuatu</option><option value=VE>Venezuela</option><option value=VN>Viet Nam</option><option value=VG>Virgin Islands, British</option><option value=VI>Virgin Islands, U.S.</option><option value=WF>Wallis and Futuna</option><option value=EH>Western Sahara</option><option value=YE>Yemen</option><option value=ZM>Zambia</option><option value=ZW>Zimbabwe</option></select><div class=modal-buttons><button id=complete-signup-btn class="btn btn-primary" data-translate-key=complete_signup></button><button data-modal-close=additionalInfoModal class="btn btn-secondary" data-translate-key=cancel></button></div></div></div><div class=modal id=uploadModal><div class=modal-content><h2 id=uploadModalTitle data-translate-key=upload_media>Upload Media</h2><input id=title data-translate-placeholder=title><textarea id=desc data-translate-placeholder=description></textarea><select id=type><option value=video data-translate-key=video>Video</option><option value=image data-translate-key=image>Image</option></select><input type=file id=mediaFileInput accept=image/*,video/* style=margin-top:10px><div id=thumbnail-preview-container class=hidden style=margin-top:15px><p style=color:var(--text-color-secondary);margin-bottom:8px;font-size:14px>Thumbnail Preview:</p><img id=thumbnailPreviewImage src="" alt="Video thumbnail preview" style="max-width:100%;max-height:200px;border-radius:8px;margin:0 auto;display:block;border:1px solid var(--light-gray)"></div><div class=modal-buttons><button id=save-upload-btn class="btn btn-primary" data-translate-key=save>Save</button><button data-modal-close=uploadModal class="btn btn-secondary" data-translate-key=cancel>Cancel</button></div></div></div><div class=modal id=editProfileModal><div class=modal-content><h3 data-translate-key=edit_profile>Edit Profile</h3><label for=newAvatarFile style=cursor:pointer;display:block;margin-top:10px><img id=avatarPreview src=https://img.icons8.com/ios/100/user.png alt="avatar preview" style=width:90px;height:90px;border-radius:50%;object-fit:cover;margin-bottom:10px><div data-translate-key=change_avatar class="btn btn-secondary" style="margin:0 auto 10px;width:fit-content">Change Avatar</div></label><input type=file id=newAvatarFile accept=image/* style=display:none><input id=newDisplayName data-translate-placeholder=display_name><textarea id=newBio data-translate-placeholder=bio></textarea><label for=newDob style="display:block;text-align:left;margin-bottom:-5px;margin-top:10px;font-size:14px" data-translate-key=date_of_birth></label><input id=newDob type=date><label for=newGender style="display:block;text-align:left;margin-bottom:-5px;margin-top:10px;font-size:14px" data-translate-key=gender></label><select id=newGender><option value="" data-translate-key=select_gender></option><option value=male data-translate-key=male></option><option value=female data-translate-key=female></option><option value=other data-translate-key=other></option><option value=prefer_not_say data-translate-key=prefer_not_say></option></select><label for=newCountry style="display:block;text-align:left;margin-bottom:-5px;margin-top:10px;font-size:14px" data-translate-key=country></label><select id=newCountry><option value="" data-translate-key=select_country></option><option value=AF>Afghanistan</option><option value=AX>Åland Islands</option><option value=AL>Albania</option><option value=DZ>Algeria</option><option value=AS>American Samoa</option><option value=AD>Andorra</option><option value=AO>Angola</option><option value=AI>Anguilla</option><option value=AQ>Antarctica</option><option value=AG>Antigua and Barbuda</option><option value=AR>Argentina</option><option value=AM>Armenia</option><option value=AW>Aruba</option><option value=AU>Australia</option><option value=AT>Austria</option><option value=AZ>Azerbaijan</option><option value=BS>Bahamas</option><option value=BH>Bahrain</option><option value=BD>Bangladesh</option><option value=BB>Barbados</option><option value=BY>Belarus</option><option value=BE>Belgium</option><option value=BZ>Belize</option><option value=BJ>Benin</option><option value=BM>Bermuda</option><option value=BT>Bhutan</option><option value=BO>Bolivia</option><option value=BA>Bosnia and Herzegovina</option><option value=BW>Botswana</option><option value=BV>Bouvet Island</option><option value=BR>Brazil</option><option value=IO>British Indian Ocean Territory</option><option value=BN>Brunei Darussalam</option><option value=BG>Bulgaria</option><option value=BF>Burkina Faso</option><option value=BI>Burundi</option><option value=KH>Cambodia</option><option value=CM>Cameroon</option><option value=CA>Canada</option><option value=CV>Cape Verde</option><option value=KY>Cayman Islands</option><option value=CF>Central African Republic</option><option value=TD>Chad</option><option value=CL>Chile</option><option value=CN>China</option><option value=CX>Christmas Island</option><option value=CC>Cocos (Keeling) Islands</option><option value=CO>Colombia</option><option value=KM>Comoros</option><option value=CG>Congo</option><option value=CD>Congo, The Democratic Republic of The</option><option value=CK>Cook Islands</option><option value=CR>Costa Rica</option><option value=CI>Cote D'ivoire</option><option value=HR>Croatia</option><option value=CU>Cuba</option><option value=CY>Cyprus</option><option value=CZ>Czech Republic</option><option value=DK>Denmark</option><option value=DJ>Djibouti</option><option value=DM>Dominica</option><option value=DO>Dominican Republic</option><option value=EC>Ecuador</option><option value=EG>Egypt</option><option value=SV>El Salvador</option><option value=GQ>Equatorial Guinea</option><option value=ER>Eritrea</option><option value=EE>Estonia</option><option value=ET>Ethiopia</option><option value=FK>Falkland Islands (Malvinas)</option><option value=FO>Faroe Islands</option><option value=FJ>Fiji</option><option value=FI>Finland</option><option value=FR>France</option><option value=GF>French Guiana</option><option value=PF>French Polynesia</option><option value=TF>French Southern Territories</option><option value=GA>Gabon</option><option value=GM>Gambia</option><option value=GE>Georgia</option><option value=DE>Germany</option><option value=GH>Ghana</option><option value=GI>Gibraltar</option><option value=GR>Greece</option><option value=GL>Greenland</option><option value=GD>Grenada</option><option value=GP>Guadeloupe</option><option value=GU>Guam</option><option value=GT>Guatemala</option><option value=GG>Guernsey</option><option value=GN>Guinea</option><option value=GW>Guinea-bissau</option><option value=GY>Guyana</option><option value=HT>Haiti</option><option value=HM>Heard Island and Mcdonald Islands</option><option value=VA>Holy See (Vatican City State)</option><option value=HN>Honduras</option><option value=HK>Hong Kong</option><option value=HU>Hungary</option><option value=IS>Iceland</option><option value=IN>India</option><option value=ID>Indonesia</option><option value=IR>Iran, Islamic Republic of</option><option value=IQ>Iraq</option><option value=IE>Ireland</option><option value=IM>Isle of Man</option><option value=IL>Israel</option><option value=IT>Italy</option><option value=JM>Jamaica</option><option value=JP>Japan</option><option value=JE>Jersey</option><option value=JO>Jordan</option><option value=KZ>Kazakhstan</option><option value=KE>Kenya</option><option value=KI>Kiribati</option><option value=KP>Korea, Democratic People's Republic of</option><option value=KR>Korea, Republic of</option><option value=KW>Kuwait</option><option value=KG>Kyrgyzstan</option><option value=LA>Lao People's Democratic Republic</option><option value=LV>Latvia</option><option value=LB>Lebanon</option><option value=LS>Lesotho</option><option value=LR>Liberia</option><option value=LY>Libyan Arab Jamahiriya</option><option value=LI>Liechtenstein</option><option value=LT>Lithuania</option><option value=LU>Luxembourg</option><option value=MO>Macao</option><option value=MK>Macedonia, The Former Yugoslav Republic of</option><option value=MG>Madagascar</option><option value=MW>Malawi</option><option value=MY>Malaysia</option><option value=MV>Maldives</option><option value=ML>Mali</option><option value=MT>Malta</option><option value=MH>Marshall Islands</option><option value=MQ>Martinique</option><option value=MR>Mauritania</option><option value=MU>Mauritius</option><option value=YT>Mayotte</option><option value=MX>Mexico</option><option value=FM>Micronesia, Federated States of</option><option value=MD>Moldova, Republic of</option><option value=MC>Monaco</option><option value=MN>Mongolia</option><option value=ME>Montenegro</option><option value=MS>Montserrat</option><option value=MA>Morocco</option><option value=MZ>Mozambique</option><option value=MM>Myanmar</option><option value=NA>Namibia</option><option value=NR>Nauru</option><option value=NP>Nepal</option><option value=NL>Netherlands</option><option value=AN>Netherlands Antilles</option><option value=NC>New Caledonia</option><option value=NZ>New Zealand</option><option value=NI>Nicaragua</option><option value=NE>Niger</option><option value=NG>Nigeria</option><option value=NU>Niue</option><option value=NF>Norfolk Island</option><option value=MP>Northern Mariana Islands</option><option value=NO>Norway</option><option value=OM>Oman</option><option value=PK>Pakistan</option><option value=PW>Palau</option><option value=PS>Palestinian Territory, Occupied</option><option value=PA>Panama</option><option value=PG>Papua New Guinea</option><option value=PY>Paraguay</option><option value=PE>Peru</option><option value=PH>Philippines</option><option value=PN>Pitcairn</option><option value=PL>Poland</option><option value=PT>Portugal</option><option value=PR>Puerto Rico</option><option value=QA>Qatar</option><option value=RE>Reunion</option><option value=RO>Romania</option><option value=RU>Russian Federation</option><option value=RW>Rwanda</option><option value=SH>Saint Helena</option><option value=KN>Saint Kitts and Nevis</option><option value=LC>Saint Lucia</option><option value=PM>Saint Pierre and Miquelon</option><option value=VC>Saint Vincent and The Grenadines</option><option value=WS>Samoa</option><option value=SM>San Marino</option><option value=ST>Sao Tome and Principe</option><option value=SA>Saudi Arabia</option><option value=SN>Senegal</option><option value=RS>Serbia</option><option value=SC>Seychelles</option><option value=SL>Sierra Leone</option><option value=SG>Singapore</option><option value=SK>Slovakia</option><option value=SI>Slovenia</option><option value=SB>Solomon Islands</option><option value=SO>Somalia</option><option value=ZA>South Africa</option><option value=GS>South Georgia and The South Sandwich Islands</option><option value=ES>Spain</option><option value=LK>Sri Lanka</option><option value=SD>Sudan</option><option value=SR>Suriname</option><option value=SJ>Svalbard and Jan Mayen</option><option value=SZ>Swaziland</option><option value=SE>Sweden</option><option value=CH>Switzerland</option><option value=SY>Syrian Arab Republic</option><option value=TW>Taiwan, Province of China</option><option value=TJ>Tajikistan</option><option value=TZ>Tanzania, United Republic of</option><option value=TH>Thailand</option><option value=TL>Timor-leste</option><option value=TG>Togo</option><option value=TK>Tokelau</option><option value=TO>Tonga</option><option value=TT>Trinidad and Tobago</option><option value=TN>Tunisia</option><option value=TR>Turkey</option><option value=TM>Turkmenistan</option><option value=TC>Turks and Caicos Islands</option><option value=TV>Tuvalu</option><option value=UG>Uganda</option><option value=UA>Ukraine</option><option value=AE>United Arab Emirates</option><option value=GB>United Kingdom</option><option value=US>United States</option><option value=UM>United States Minor Outlying Islands</option><option value=UY>Uruguay</option><option value=UZ>Uzbekistan</option><option value=VU>Vanuatu</option><option value=VE>Venezuela</option><option value=VN>Viet Nam</option><option value=VG>Virgin Islands, British</option><option value=VI>Virgin Islands, U.S.</option><option value=WF>Wallis and Futuna</option><option value=EH>Western Sahara</option><option value=YE>Yemen</option><option value=ZM>Zambia</option><option value=ZW>Zimbabwe</option></select><fieldset class=privacy-settings-group><legend data-translate-key=privacy_settings></legend><div class=privacy-setting-item><input type=checkbox id=showAge><label for=showAge data-translate-key=show_age></label></div><div class=privacy-setting-item><input type=checkbox id=showGender><label for=showGender data-translate-key=show_gender></label></div><div class=privacy-setting-item><input type=checkbox id=showCountry><label for=showCountry data-translate-key=show_country></label></div></fieldset><div class=modal-buttons><button id=saveProfileBtn class="btn btn-primary" data-translate-key=save>Save</button><button data-modal-close=editProfileModal class="btn btn-secondary" data-translate-key=cancel>Cancel</button></div></div></div><div class=modal id=privateChatModal><div class=modal-content style=height:70%;display:flex;flex-direction:column><h3 id=chatWith>Chat</h3><div id=chatMessages class=comments-list></div><div class=add-comment><input id=chatInput data-translate-placeholder=type_message><button id=sendChatBtn>➤</button></div><div class=modal-buttons><button data-modal-close=privateChatModal class="btn btn-secondary" data-translate-key=close>Close</button></div></div></div><div class=modal id=deleteToast><div class=modal-content><p data-translate-key=delete_confirm>Are you sure you want to delete?</p><div class=modal-buttons><button id=confirmDelete class="btn btn-primary" style=background:#e74c3c data-translate-key=yes>Yes</button><button id=cancelDelete class="btn btn-secondary" data-translate-key=no>No</button></div></div></div><div class=modal id=reportAbuseModal><div class=modal-content style="text-align:left"><h3 data-translate-key=report_abuse style="text-align:center">Report Abuse</h3><p><strong data-translate-key=reporting_user></strong><span id=reportedUserName></span></p><input type=hidden id=reportedUserId><textarea id=reportReason data-translate-placeholder=report_reason_placeholder></textarea><input id=reportPostLink data-translate-placeholder=report_post_link_placeholder><div class="admin-section" style="margin-top:20px;padding-top:15px;border-top:1px solid var(--light-gray)"><h4 data-translate-key=admin_section_title style="margin-bottom:10px;text-align:center;color:var(--text-color-secondary)">Admin Section</h4><label for=reportAdminNotes data-translate-key=admin_notes style="display:block;margin-bottom:5px"></label><textarea id=reportAdminNotes data-translate-placeholder=admin_notes_placeholder disabled style="resize:none;background-color:var(--dark-gray);cursor:not-allowed"></textarea><label for=reportCurrentStatusDisplay data-translate-key=current_status style="display:block;margin-top:10px;margin-bottom:5px"></label><p id=reportCurrentStatusDisplay style="background:var(--dark-gray);padding:10px;border-radius:8px;border:1px solid var(--light-gray)"></p></div><div class=modal-buttons><button id=submitReportBtn class="btn btn-primary" style=background-color:#e74c3c data-translate-key=report>Report</button><button data-modal-close=reportAbuseModal class="btn btn-secondary" data-translate-key=cancel>Cancel</button></div></div></div><div class=modal id=reportDetailModal><div class=modal-content><h3 data-translate-key=report_details>Report Details</h3><p><strong><span data-translate-key=reporter></span>:</strong><span id=detailReporterName></span></p><p><strong><span data-translate-key=reported></span>:</strong><span id=detailReportedName></span></p><p><strong><span data-translate-key=date></span>:</strong><span id=detailReportDate></span></p><p><strong><span data-translate-key=status></span>:</strong><span id=detailReportStatus></span></p><p><strong><span data-translate-key=reason></span>:</strong></p><div id=detailReportReason class=report-reason-box></div><p><strong><span data-translate-key=post_link></span>:</strong><span id=detailPostLink></span></p><div id=reportDetailUserAdminResponse class="admin-section hidden" style="text-align:left;margin-top:15px;border-top:none;padding-top:0"><h4 data-translate-key=admin_response style="text-align:center">Admin Response</h4><div id=detailAdminResponse class=report-reason-box style="min-height:50px"></div></div><div id=reportDetailUserActions class="modal-buttons hidden" style=margin-top:15px><button id=resolveReportBtn class="btn btn-primary" data-translate-key=mark_as_resolved style=background-color:#2ecc71></button></div><div id=reportDetailAdminSection class="admin-section hidden"><h4 data-translate-key=admin_response>Admin Response</h4><textarea id=reportAdminResponse data-translate-placeholder=admin_response_placeholder></textarea><label for=reportStatusSelect style=margin-top:10px;display:block data-translate-key=update_status>Update Status</label><select id=reportStatusSelect><option value=pending data-translate-key=status_pending>Pending</option><option value=in_review data-translate-key=status_in_review>In Review</option><option value=resolved data-translate-key=status_resolved>Resolved</option></select><div class=modal-buttons><button id=saveReportChangesBtn class="btn btn-primary" data-translate-key=save_changes>Save Changes</button></div></div><div class=modal-buttons><button data-modal-close=reportDetailModal class="btn btn-secondary" data-translate-key=close>Close</button></div></div></div><div class=modal id=requestDeletionModal><div class=modal-content style="text-align:left"><h3 id=requestDeletionModalTitle data-translate-key=request_deletion_title style="text-align:center">Request Account Deletion</h3><p style="margin-top:10px;"><strong>UID:</strong><span id=deletionRequestUid></span></p><p><strong><span data-translate-key=email></span>:</strong><span id=deletionRequestEmail></span></p><p><strong><span data-translate-key=display_name></span>:</strong><span id=deletionRequestName></span></p><label for=deletionRequestReason style="display:block;margin-top:15px" data-translate-key=reason_for_deletion>Reason for Deletion (Required)</label><textarea id=deletionRequestReason data-translate-placeholder=reason_for_deletion_placeholder></textarea><div id=deletionStatusContainer class="hidden" style="margin-top:15px;background:var(--dark-gray);padding:10px;border-radius:8px"><p><strong><span data-translate-key=status>Status</span>:</strong><span id=deletionRequestStatus></span></p></div><div class="admin-section" style=margin-top:15px><label for=deletionRequestAdminNotes data-translate-key=admin_notes_for_request>Admin Notes</label><textarea id=deletionRequestAdminNotes data-translate-placeholder=admin_notes_placeholder disabled style=resize:none;background-color:var(--dark-gray);cursor:not-allowed></textarea></div><div class=modal-buttons><button id=submit-deletion-request-btn class="btn btn-primary" style=background-color:#e74c3c data-translate-key=submit_request>Submit Request</button><button id="confirm-radical-delete-btn" class="btn btn-primary hidden" style="background-color:#c0392b" data-translate-key="confirm_radical_deletion">Confirm Deletion</button><button id="undo-deletion-request-btn" class="btn btn-secondary hidden" data-translate-key="undo_deletion_request">Undo Request</button><button data-modal-close=requestDeletionModal class="btn btn-secondary" data-translate-key=cancel>Cancel</button></div></div></div><div class=toast-container id=toastContainer></div><div id=uploadProgressBar><p id=progressMessage></p><div id=progressBarFill></div></div><script src=https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js></script><script src=https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js></script><script src=https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js></script><script type=module>document.addEventListener("DOMContentLoaded",(()=>{firebase.initializeApp({apiKey:"AIzaSyDRBLmKK4a0hcliz30X3DextgfMJHLJEpQ",authDomain:"ai-galry.firebaseapp.com",databaseURL:"https://ai-galry-default-rtdb.firebaseio.com/",projectId:"ai-galry",storageBucket:"ai-galry.appspot.com",messagingSenderId:"938786984748",appId:"1:938786984748:web:b2a3bc29ccc321e3349289"});let e,t=firebase.database(),a=firebase.auth(),o=new firebase.auth.GoogleAuthProvider,r={user:null,currentVisiblePostKey:null,feedQueue:[],seenKeys:new Set,lastTimestampCursor:null,isLoadingFeed:!1,currentChat:{},deleteKey:null,currentPostListeners:[],activeListeners:{},isAppMuted:!0,signupData:{}},s={},i=null,n=null,l={ar:{home:"الرئيسية",search:"بحث",notifications:"الإشعارات",profile:"ملفي",search_placeholder:"🔍 ابحث عن منشورات...",edit_profile:"تعديل الملف الشخصي",logout:"تسجيل الخروج",follow:"متابعة",message:"مراسلة",media:"الوسائط",privacy_policy:"سياسة الخصوصية",comments:"التعليقات",add_comment_placeholder:"أضف تعليقًا...",login_title:"تسجيل الدخول / إنشاء حساب",email:"البريد الإلكتروني",password:"كلمة المرور",login:"دخول",signup:"حساب جديد",cancel:"إلغاء",upload_media:"رفع وسائط",title:"العنوان",description:"الوصف",video:"فيديو",image:"صورة",save:"حفظ",display_name:"اسم العرض",bio:"السيرة الذاتية",type_message:"اكتب رسالة...",close:"إغلاق",delete_confirm:"هل أنت متأكد أنك تريد الحذف؟",yes:"نعم",no:"لا",privacy_p1:"تصف هذه السياسة كيفية جمع معلوماتك واستخدامها والتعامل معها عند استخدام تطبيقنا.",privacy_h_collect:"جمع البيانات واستخدامها",privacy_p2:"عندما تنشئ حسابًا، نجمع بريدك الإلكتروني. يمكنك اختياريًا تقديم اسم عرض وصورة ملف شخصي وسيرة ذاتية. نجمع أيضًا المحتوى الذي تنشئه، مثل الصور ومقاطع الفيديو والتعليقات والإعجابات، لتقديم الخدمة وتخصيصها.",privacy_h_contact:"التواصل معنا",privacy_p3:"لأية أسئلة حول سياسة الخصوصية هذه، يمكنك التواصل مع المطور:",developer_name:"الاسم",developer_email:"البريد الإلكتروني",privacy_full_link:"عرض سياسة الخصوصية الكاملة",reloading_feed:"إعادة تحميل المنشورات...",no_posts_yet:"لا توجد منشورات بعد.",post_unavailable:"المنشور غير متاح حاليا.",loading_post:"جاري عرض المنشور...",file_required:"الرجاء اختيار ملف",upload_failed:"فشل الرفع: ",saving_data:"جاري حفظ البيانات...",upload_success:"تم الرفع بنجاح! سيتم مراجعته.",profile_updated:"تم تحديث الملف الشخصي",deleted_successfully:"تم الحذف",logged_out:"تم تسجيل الخروج",no_comments_yet:"لا توجد تعليقات بعد.",loading:"جاري التحميل...",no_media:"لا توجد وسائط.",no_notifications:"لا توجد إشعارات جديدة.",unfollow:"إلغاء المتابعة",chat_with:"محادثة مع",unknown_user:"مستخدم",like_notification:"قام {user} بالإعجاب بمنشورك",comment_notification:"قام {user} بالتعليق على منشورك",follow_notification:"بدأ {user} بمتابعتك",chat_notification:"رسالة جديدة من {user}",report_notification:"قدم {user} بلاغًا جديدًا.",edit_media:"تعديل الوسائط",delete:"حذف",load_media:"تحميل الوسائط",change_avatar:"تغيير الصورة الرمزية",resizing_image:"جاري تغيير حجم الصورة...",uploading_image:"جاري رفع الصورة...",generating_thumbnail:"جاري إنشاء الصورة المصغرة...",uploading_files:"جاري رفع الملفات...",audio_on:"تم تشغيل الصوت",followers:"المتابعون",not_following_back:"لا يتابعونك",no_users_found:"لم يتم العثور على مستخدمين.",report:"إبلاغ",report_abuse:"الإبلاغ عن إساءة",reporting_user:"الإبلاغ عن المستخدم:",report_reason_placeholder:"سبب الإبلاغ...",report_post_link_placeholder:"رابط المنشور (اختياري)",report_submitted_success:"تم إرسال البلاغ بنجاح. شكرًا لك.",report_reason_required:"يرجى تقديم سبب للبلاغ.",submitting_report:"جاري إرسال البلاغ...",report_submit_failed:"فشل إرسال البلاغ.",my_reports:"بلاغاتي",report_status:"الحالة:",status_pending:"قيد الانتظار",status_in_review:"قيد المراجعة",status_resolved:"تم الحل",status_approved_for_deletion:"تمت الموافقة على الحذف",reported_on:"تم الإبلاغ عنه في:",no_reports_yet:"ليس لديك أي بلاغات مقدمة.",report_details:"تفاصيل البلاغ",reporter:"المبلغ",reported:"المبلغ عنه",date:"التاريخ",reason:"السبب",post_link:"رابط المنشور",status:"الحالة",admin_response:"رد الإدارة",update_status:"تحديث الحالة",save_changes:"حفظ التغييرات",report_updated:"تم تحديث البلاغ بنجاح",no_reports_found:"لم يتم العثور على بلاغات.",admin_response_placeholder:"اكتب ردك هنا...",mark_as_resolved:"تحديد كمحلول",report_marked_resolved:"تم تحديد البلاغ كمحلول بنجاح.",report_resolve_failed:"فشل تحديث البلاغ.",error_not_owner:"ليس لديك صلاحية لتعديل هذا البلاغ.",admin_section_title:"قسم الإدارة",admin_notes:"ملاحظات الإدارة",admin_notes_placeholder:"سيتم إضافة الملاحظات من قبل المسؤول...",current_status:"الحالة الحالية",request_deletion:"طلب حذف الحساب",request_deletion_title:"طلب حذف الحساب",deletion_request_status_title:"حالة طلب الحذف",reason_for_deletion:"سبب الحذف (مطلوب)",reason_for_deletion_placeholder:"يرجى شرح سبب رغبتك في حذف حسابك...",submit_request:"إرسال الطلب",deletion_request_submitted:"تم إرسال طلب الحذف. ستتم مراجعته.",reason_required:"سبب الحذف مطلوب.",confirm_deletion_request:"هل أنت متأكد أنك تريد طلب حذف حسابك؟ لا يمكن التراجع عن هذا الإجراء بعد موافقة الإدارة.",admin_notes_for_request:"ملاحظات الإدارة",deletion_request_failed:"فشل إرسال طلب الحذف.",confirm_radical_deletion:"تأكيد الحذف النهائي",undo_deletion_request:"التراجع عن الطلب",radical_delete_confirm:"هل أنت متأكد أنك تريد حذف حسابك وكل محتوياته بشكل دائم؟ لا يمكن التراجع عن هذا الإجراء.",undo_request_success:"تم إلغاء طلب الحذف.",deleting_account:"جاري حذف الحساب...",deleting_data:"جاري حذف البيانات...",deleting_authentication:"جاري حذف المصادقة...",radical_delete_failed:"فشل حذف الحساب. حاول مرة أخرى.",radical_delete_reauth_required:"هذه العملية حساسة وتتطلب إعادة تسجيل الدخول. يرجى تسجيل الخروج ثم الدخول مرة أخرى والمحاولة مجددًا.",share:"مشاركة",link_copied_to_clipboard:"تم نسخ الرابط",copy_link_failed:"فشل نسخ الرابط",share_title:"شاهد هذا المنشور على رؤية الذكاء الاصطناعي",share_text:"شاهد هذا المنشور من {user}",privacy_toast_text:"بالاستمرار في استخدام تطبيقنا، فإنك توافق على",complete_your_profile:"أكمل ملفك الشخصي",age_requirement_info:"يجب أن يكون عمرك 13 عامًا على الأقل للتسجيل.",date_of_birth:"تاريخ الميلاد *",gender:"الجنس",country:"الدولة",select_gender:"-- اختر الجنس --",male:"ذكر",female:"أنثى",other:"آخر",prefer_not_say:"أفضل عدم القول",select_country:"-- اختر الدولة --",complete_signup:"إتمام التسجيل",agree_to:"أوافق على",underage_error:"يجب أن يكون عمرك 13 عامًا أو أكثر للتسجيل.",email_password_required:"البريد الإلكتروني وكلمة المرور مطلوبان.",dob_required:"تاريخ الميلاد حقل إجباري.",privacy_settings:"إعدادات الخصوصية",show_age:"إظهار عمري في ملفي الشخصي",show_gender:"إظهار جنسي في ملفي الشخصي",show_country:"إظهار دولتي في ملفي الشخصي",age:"العمر",forgot_password:"هل نسيت كلمة المرور؟",reset_password:"إعادة تعيين كلمة المرور",send_reset_link:"إرسال رابط إعادة التعيين",reset_email_sent:"تم إرسال بريد إعادة تعيين كلمة المرور. تحقق من بريدك الوارد.",reset_email_failed_user_not_found:"فشل إرسال البريد الإلكتروني. لم يتم العثور على مستخدم بهذا البريد الإلكتروني.",account_suspended:"تم تعليق حسابك. يرجى الاتصال بالدعم.",block:"حظر",unblock:"إلغاء الحظر",delete_comment_confirm:"هل أنت متأكد من حذف هذا التعليق؟",comment_deleted:"تم حذف التعليق.",user_has_blocked_you:"لا يمكنك التفاعل مع هذا المستخدم.",you_have_blocked_this_user:"لقد قمت بحظر هذا المستخدم. قم بإلغاء الحظر للتفاعل.",comment_delete_failed:"فشل حذف التعليق."},en:{home:"Home",search:"Search",notifications:"Notifications",profile:"Profile",search_placeholder:"🔍 Search for posts...",edit_profile:"Edit Profile",logout:"Logout",follow:"Follow",message:"Message",media:"Media",privacy_policy:"Privacy Policy",comments:"Comments",add_comment_placeholder:"Add a comment...",login_title:"Login / Sign Up",email:"Email",password:"Password",login:"Login",signup:"Sign Up",cancel:"Cancel",upload_media:"Upload Media",title:"Title",description:"Description",video:"Video",image:"Image",save:"Save",display_name:"Display Name",bio:"Bio",type_message:"Type a message...",close:"Close",delete_confirm:"Are you sure you want to delete?",yes:"Yes",no:"No",privacy_p1:"This policy describes how we collect, use, and handle your information when you use our application.",privacy_h_collect:"Data Collection and Use",privacy_p2:"When you create an account, we collect your email. You may optionally provide a display name, profile picture, and bio. We also collect content you create, like photos, videos, comments, and likes, to provide and personalize the service.",privacy_h_contact:"Contact Us",privacy_p3:"For any questions about this Privacy Policy, you can contact the developer:",developer_name:"Name",developer_email:"Email",privacy_full_link:"View Full Privacy Policy",reloading_feed:"Reloading feed...",no_posts_yet:"No posts yet.",post_unavailable:"Post is currently unavailable.",loading_post:"Loading post...",file_required:"Please select a file",upload_failed:"Upload failed: ",saving_data:"Saving data...",upload_success:"Uploaded successfully! Pending review.",profile_updated:"Profile updated successfully",deleted_successfully:"Deleted successfully",logged_out:"Logged out",no_comments_yet:"No comments yet.",loading:"Loading...",no_media:"No media found.",no_notifications:"No new notifications.",unfollow:"Unfollow",chat_with:"Chat with",unknown_user:"user",like_notification:"{user} liked your post",comment_notification:"{user} commented on your post",follow_notification:"{user} started following you",chat_notification:"New message from {user}",report_notification:"{user} has submitted a new report.",edit_media:"Edit Media",delete:"Delete",load_media:"Load Media",change_avatar:"Change Avatar",resizing_image:"Resizing image...",uploading_image:"Uploading image...",generating_thumbnail:"Generating thumbnail...",uploading_files:"Uploading files...",audio_on:"Audio On",followers:"Followers",not_following_back:"Not Following Back",no_users_found:"No users found.",report:"Report",report_abuse:"Report Abuse",reporting_user:"Reporting User:",report_reason_placeholder:"Reason for reporting...",report_post_link_placeholder:"Link to post (optional)",report_submitted_success:"Report submitted successfully. Thank you.",report_reason_required:"Please provide a reason for the report.",submitting_report:"Submitting report...",report_submit_failed:"Failed to submit report.",my_reports:"My Reports",report_status:"Status:",status_pending:"Pending",status_in_review:"In Review",status_resolved:"Resolved",status_approved_for_deletion:"Approved for Deletion",reported_on:"Reported on:",no_reports_yet:"You have no submitted reports.",report_details:"Report Details",reporter:"Reporter",reported:"Reported",date:"Date",reason:"Reason",post_link:"Post Link",status:"Status",admin_response:"Admin Response",update_status:"Update Status",save_changes:"Save Changes",report_updated:"Report Updated Successfully",no_reports_found:"No reports found.",admin_response_placeholder:"Type your response here...",mark_as_resolved:"Mark as Resolved",report_marked_resolved:"Report marked as resolved successfully.",report_resolve_failed:"Failed to update report.",error_not_owner:"You do not have permission to modify this report.",admin_section_title:"Admin Section",admin_notes:"Admin Notes",admin_notes_placeholder:"Notes will be added by an admin...",current_status:"Current Status",request_deletion:"Request Deletion",request_deletion_title:"Request Account Deletion",deletion_request_status_title:"Deletion Request Status",reason_for_deletion:"Reason for Deletion (Required)",reason_for_deletion_placeholder:"Please explain why you want to delete your account...",submit_request:"Submit Request",deletion_request_submitted:"Deletion request submitted. It will be reviewed.",reason_required:"A reason for deletion is required.",confirm_deletion_request:"Are you sure you want to request your account deletion? This action cannot be undone after admin approval.",admin_notes_for_request:"Admin Notes",deletion_request_failed:"Failed to submit deletion request.",confirm_radical_deletion:"Confirm Permanent Deletion",undo_deletion_request:"Undo Request",radical_delete_confirm:"Are you sure you want to PERMANENTLY delete your account and all of its content? This action cannot be undone.",undo_request_success:"Your deletion request has been cancelled.",deleting_account:"Deleting account...",deleting_data:"Deleting data...",deleting_authentication:"Deleting authentication...",radical_delete_failed:"Failed to delete account. Please try again.",radical_delete_reauth_required:"This operation is sensitive and requires recent authentication. Please sign out, sign back in, and try again.",share:"Share",link_copied_to_clipboard:"Link copied to clipboard",copy_link_failed:"Failed to copy link",share_title:"Check out this post on AI Vision",share_text:"See this post by {user}",privacy_toast_text:"By continuing to use our app, you agree to our",complete_your_profile:"Complete Your Profile",age_requirement_info:"You must be at least 13 years old to register.",date_of_birth:"Date of Birth *",gender:"Gender",country:"Country",select_gender:"-- Select Gender --",male:"Male",female:"Female",other:"Other",prefer_not_say:"Prefer not to say",select_country:"-- Select Country --",complete_signup:"Complete Sign Up",agree_to:"I agree to the",underage_error:"You must be 13 or older to sign up.",email_password_required:"Email and password are required.",dob_required:"Date of birth is required.",privacy_settings:"Privacy Settings",show_age:"Show my age on my profile",show_gender:"Show my gender on my profile",show_country:"Show my country on my profile",age:"Age",forgot_password:"Forgot Password?",reset_password:"Reset Password",send_reset_link:"Send Reset Link",reset_email_sent:"Password reset email sent. Check your inbox.",reset_email_failed_user_not_found:"Failed to send email. No user found with that email address.",account_suspended:"Your account has been suspended. Please contact support.",block:"Block",unblock:"Unblock",delete_comment_confirm:"Are you sure you want to delete this comment?",comment_deleted:"Comment deleted.",user_has_blocked_you:"You cannot interact with this user.",you_have_blocked_this_user:"You have blocked this user. Unblock them to interact.",comment_delete_failed:"Failed to delete comment."}},d="en",c=(e,t={})=>{let a=l[d]?.[e]||l.en[e]||t.defaultValue||e;for(let e in t)a=a.replace(`{${e}}`,t[e]);return a},u=e=>document.getElementById(e),p=(e,t="q_auto:eco,f_auto,w_auto,c_limit")=>e?e.replace(/upload\//,`upload/${t}/`):"",m=(e,t={},a=3e3)=>{let o=document.createElement("div");o.className="toast",o.innerText=c(e,t),u("toastContainer").appendChild(o),setTimeout((()=>o.remove()),a)},_=(e,t="",a=0)=>{u("uploadProgressBar").style.display=e?"block":"none",e&&(u("progressMessage").innerText=c(t),u("progressBarFill").style.width=`${a}%`)},f=e=>u(e)?.classList.add("show"),v=e=>u(e)?.classList.remove("show"),h=(e,t)=>{let a=null;return(...o)=>{clearTimeout(a),a=setTimeout((()=>e(...o)),t)}},g=async e=>{let a=s[e];if(a&&Date.now()-a.timestamp<3e5)return a.data;try{let a=(await t.ref("users/"+e).once("value")).val()||{uid:e,displayName:c("unknown_user"),photoURL:""};return s[e]={data:a,timestamp:Date.now()},a}catch(t){return console.error(`Error fetching user data for ${e}:`,t),{uid:e,displayName:c("unknown_user"),photoURL:""}}},y=async()=>{if(!r.user)return!1;return!!(await g(r.user.uid)).isBlocked},b=async(e,a)=>{$("user-list-page");let o=u("user-list-title"),r=u("user-list-container");r.innerHTML=`<p style="text-align:center;">${c("loading")}</p>`;let s=e=>{r.innerHTML="",0===e.length?r.innerHTML=`<p style="text-align:center;">${c("no_users_found")}</p>`:e.forEach((async e=>{let t=await g(e),a=document.createElement("div");a.className="item",a.style.display="flex",a.style.alignItems="center",a.style.gap="15px",a.innerHTML=`\n <img src="${p(t.photoURL)||"https://img.icons8.com/ios/100/user.png"}" alt="${t.displayName}" style="width:45px;height:45px;border-radius:50%;object-fit:cover;">\n <strong>${t.displayName||c("unknown_user")}</strong>\n `,a.onclick=()=>A(e),r.appendChild(a)}))};if("followers"===e)o.textContent=c("followers"),s(Object.keys((await t.ref(`followers/${a}`).once("value")).val()||{}));else if("not_following_back"===e){o.textContent=c("not_following_back");let[e,r]=await Promise.all([t.ref(`follows/${a}`).once("value"),t.ref(`followers/${a}`).once("value")]),i=e.val()||{},n=new Set(Object.keys(r.val()||{})),l=Object.keys(i).filter((e=>!n.has(e)));s(l)}},w=async()=>{if(!r.user)return;u("reports-page-title").textContent=c("my_reports"),$("reports-page");let e=u("reports-list");e.innerHTML=`<p style="text-align:center;">${c("loading")}</p>`;let a=await t.ref(`users/${r.user.uid}/reports`).once("value");a.exists()?k(a,e):e.innerHTML=`<p style="text-align:center;">${c("no_reports_yet")}</p>`},k=(e,t)=>{t.innerHTML="";let a=[];e.forEach((e=>{a.push({key:e.key,...e.val()})})),a.sort(((e,t)=>t.timestamp-e.timestamp)).forEach((async e=>{let a=document.createElement("div");a.className="item report-item",a.style.cursor="pointer",a.onclick=()=>L(e.key,e.reporterUid);let o=await g(e.reportedUid),r=new Date(e.timestamp).toLocaleDateString(),s=e.status||"pending";a.innerHTML=`\n <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">\n <div>\n <strong>${o.displayName||c("unknown_user")}</strong>\n <p style="font-size: 13px; color: var(--text-color-secondary); margin-top: 4px;">${c("reported_on")} ${r}</p>\n </div>\n <span class="status status-${s.replace("_","-")}">${c(`status_${s}`)}</span>\n </div>\n `,t.appendChild(a)}))},L=async(e,a)=>{if(!e||!a)return;u("reportDetailModal").dataset.reportId=e,u("reportDetailModal").dataset.reporterUid=a;let o=await t.ref(`users/${a}/reports/${e}`).once("value");if(!o.exists())return void m("report_not_found");let s=o.val(),i=await g(s.reporterUid),n=await g(s.reportedUid);u("detailReporterName").textContent=i.displayName,u("detailReportedName").textContent=n.displayName,u("detailReportDate").textContent=new Date(s.timestamp).toLocaleString(),u("detailReportStatus").textContent=c(`status_${s.status||"pending"}`),u("detailReportReason").textContent=s.reason,u("detailPostLink").textContent=s.postLink||"N/A";let l=u("reportDetailUserAdminResponse"),d=u("detailAdminResponse");s.adminResponse?(d.textContent=s.adminResponse,l.classList.remove("hidden")):l.classList.add("hidden");const p=r.user&&[].includes(r.user.uid);let _=u("reportDetailAdminSection"),v=u("reportDetailUserActions");_.classList.add("hidden"),v.classList.add("hidden"),p?(_.classList.remove("hidden"),u("reportAdminResponse").value=s.adminResponse||"",u("reportStatusSelect").value=s.status||"pending"):r.user&&r.user.uid===s.reporterUid&&"resolved"!==s.status&&v.classList.remove("hidden"),f("reportDetailModal")},$=e=>{if(document.querySelectorAll(".page-overlay").forEach((e=>e.classList.remove("active"))),"home-page"!==e)u(e)?.classList.add("active"),i&&!i.paused&&i.pause();else{let e=u(`post-${r.currentVisiblePostKey}`);if(e){let t=e.querySelector("video");t&&t.paused&&(t.play().catch((()=>{})),i=t)}}document.querySelectorAll(".nav-btn").forEach((t=>{t.classList.toggle("active",t.dataset.page===e)})),"notifications-page"===e&&r.user&&function(){if(!r.user)return;H();let e=u("notificationList");e.innerHTML="";let a=t.ref("notifications").orderByChild("to").equalTo(r.user.uid).limitToLast(50);B.added={ref:a,callback:a.on("child_added",(async t=>{let a=e.querySelector("p");a&&a.remove();let o={...t.val(),key:t.key};if(u(`notif-${o.key}`))return;let r,s,i=document.createElement("div");i.className="item",i.id=`notif-${o.key}`,i.textContent=c("loading"),e.prepend(i),s=o.from?o.from:o.fromId&&(await g(o.fromId)).displayName||c("unknown_user"),r="like"===o.type?c("like_notification",{user:s}):"comment"===o.type?c("comment_notification",{user:s}):"follow"===o.type?c("follow_notification",{user:s}):"chat"===o.type?c("chat_notification",{user:s}):"report"===o.type?c("report_notification",{user:s}):c("unknown_notification",{user:s}),i.textContent=r,i.onclick=()=>j(o),V(e.children.length)}))},B.removed={ref:a,callback:a.on("child_removed",(t=>{let a=t.key,o=u(`notif-${a}`);o&&o.remove();let r=e.children.length;V(r),0===r&&(e.innerHTML=`<p>${c("no_notifications")}</p>`)}))},a.once("value",(t=>{t.exists()||(e.innerHTML=`<p>${c("no_notifications")}</p>`,V(0))}))}()},C=async(e,t={})=>{let a=new FormData;a.append("file",e),a.append("upload_preset","My First App"),Object.keys(t).forEach((e=>{a.append(e,t[e])}));try{let e=await fetch("https://api.cloudinary.com/v1_1/df4fjnby3/upload",{method:"POST",body:a}),t=await e.json();if(!e.ok)throw Error(t.error?.message||"Cloudinary upload failed with unknown error.");return t.secure_url}catch(e){throw console.error("Error in uploadToCloudinary:",e),e}},M=h((e=>{e&&t.ref(`products/${e}/views`).set(firebase.database.ServerValue.increment(1))}),1e3),S=async()=>{r.feedQueue.length<5&&await(async()=>{if(r.isLoadingFeed)return;r.isLoadingFeed=!0;const e=async()=>{let e=t.ref("products").orderByChild("timestamp").limitToLast(50);r.lastTimestampCursor&&(e=e.endAt(r.lastTimestampCursor));const a=await e.once("value");let o=[];if(a.exists()&&a.forEach((e=>{const t=e.val(),a=e.key;"approved"===t.status&&!r.seenKeys.has(a)&&o.push({key:a,...t})})),0===o.length)return!1;r.lastTimestampCursor=o[0].timestamp;const s=Date.now();o.forEach((e=>{const t=(s-e.timestamp)/36e5,a=e.engagementScore||0;e.hotScore=a/Math.pow(t+2,1.8)})),o.sort(((e,t)=>t.hotScore-e.hotScore));const i=o.map((e=>e.key));return i.forEach((e=>r.seenKeys.add(e))),r.feedQueue.push(...i),!0};!await e()&&r.feedQueue.length<1&&(m("reloading_feed"),r.lastTimestampCursor=null,r.seenKeys.clear(),await e()),r.isLoadingFeed=!1})();let a=r.feedQueue.shift();if(!a){let e=u("feed");return void(0===e.children.length&&(e.innerHTML=`<div class="post" style="display:flex; align-items:center; justify-content:center; text-align:center;"><p>${c("no_posts_yet")}</p></div>`))}let o=await t.ref(`products/${a}`).once("value");if(o.exists()){let t=((e,t)=>{let a=document.createElement("div");return a.className="post",a.id=`post-${t}`,a.dataset.key=t,a.ondblclick=()=>T(r.currentVisiblePostKey),"video"===e.type?(a.classList.add("video-placeholder"),a.dataset.videoSrc=p(e.mediaUrl),a.dataset.posterSrc=p(e.thumb,"q_auto:good"),a.innerHTML=`<img src="${p(e.thumb,"q_auto:good")}" loading="lazy" alt="${e.title||""}">`):a.innerHTML=`<img src="${p(e.mediaUrl)}" loading="lazy" alt="${e.title||""}">`,a})(o.val(),o.key),a=u("feed");a.querySelector("p")&&(a.innerHTML=""),a.appendChild(t),e.observe(t)}},x=e=>{if(!e||!e.dataset.key)return;let t=e.previousElementSibling?.previousElementSibling;if(t&&!t.classList.contains("video-placeholder")&&t.dataset.videoSrc){let e=t.querySelector("video");e&&(e.pause(),e.src="",t.innerHTML=`<img src="${t.dataset.posterSrc}" loading="lazy" alt="">`,t.classList.add("video-placeholder"))}let a=e.nextElementSibling?.nextElementSibling;if(a&&!a.classList.contains("video-placeholder")&&a.dataset.videoSrc){let e=a.querySelector("video");e&&(e.pause(),e.src="",a.innerHTML=`<img src="${a.dataset.posterSrc}" loading="lazy" alt="">`,a.classList.add("video-placeholder"))}if(i&&i.parentElement!==e&&i.pause(),e.classList.contains("video-placeholder")&&e.dataset.videoSrc){let t=document.createElement("video");t.src=e.dataset.videoSrc,t.poster=e.dataset.posterSrc,t.playsinline=!0,t.muted=r.isAppMuted,t.loop=!0,e.innerHTML="",e.appendChild(t),t.play().catch((()=>{})),e.classList.remove("video-placeholder"),i=t}else{let t=e.querySelector("video");t&&(t.muted=r.isAppMuted,t.play().catch((()=>{})),i=t)}let o=e.nextElementSibling;if(o&&o.classList.contains("video-placeholder")&&o.dataset.videoSrc){let e=document.createElement("video");e.src=o.dataset.videoSrc,e.poster=o.dataset.posterSrc,e.playsinline=!0,e.muted=r.isAppMuted,e.loop=!0,e.preload="auto",o.innerHTML="",o.appendChild(e),o.classList.remove("video-placeholder")}},E=async(t=null)=>{u("feed").innerHTML=`<div class="post" style="display:flex; align-items:center; justify-content:center; text-align:center;"><p>${c("loading")}</p></div>`,q(),e&&e.disconnect(),r.feedQueue=[],r.seenKeys=new Set,r.lastTimestampCursor=null,r.isLoadingFeed=!1,t&&(r.feedQueue.push(t),r.seenKeys.add(t)),(()=>{e&&e.disconnect();let t={root:u("feed"),threshold:.7};e=new IntersectionObserver((async e=>{for(let t of e)if(t.isIntersecting){let e=t.target;x(e);let a=e.dataset.key;a!==r.currentVisiblePostKey&&(r.currentVisiblePostKey=a,R(a),M(a)),null===e.nextElementSibling?.nextElementSibling&&await S()}}),t)})(),await S(),await S(),await S()},q=()=>{r.currentPostListeners.forEach((({ref:e,event:t,callback:a})=>e.off(t,a))),r.currentPostListeners=[]},R=async e=>{if(q(),!e)return;let a=await t.ref(`products/${e}`).once("value");if(!a.exists())return;let o=a.val(),s=await g(o.uid);u("ui-post-author").textContent=`@${s.displayName||c("unknown_user")}`;let i=s.photoURL||"https://img.icons8.com/ios/100/user.png";u("ui-avatar-btn").querySelector("img").src=i,u("ui-post-title").textContent=o.title||"";let n=c("share");u("ui-avatar-btn").onclick=()=>A(o.uid),u("ui-post-author").onclick=()=>A(o.uid),u("ui-like-btn").onclick=()=>T(e),u("ui-comment-btn").onclick=()=>D(e),u("ui-share-btn").onclick=()=>Q(e),u("ui-share-btn").title=n;let l=t.ref(`products/${e}`),d=l.child("likes").on("value",(e=>{u("ui-like-count").textContent=(e.val()||0).toString()}));r.currentPostListeners.push({ref:l.child("likes"),event:"value",callback:d});let p=l.child("comments").on("value",(e=>{u("ui-comment-count").textContent=e.exists()?e.numChildren().toString():"0"}));r.currentPostListeners.push({ref:l.child("comments"),event:"value",callback:p});let m=l.child("shares").on("value",(e=>{u("ui-share-count").textContent=(e.val()||0).toString()}));if(r.currentPostListeners.push({ref:l.child("shares"),event:"value",callback:m}),r.user){let a=t.ref(`likes/${e}/${r.user.uid}`),o=a.on("value",(e=>{u("ui-like-btn").classList.toggle("liked",e.exists())}));r.currentPostListeners.push({ref:a,event:"value",callback:o})}else u("ui-like-btn").classList.remove("liked")},T=async e=>{if(!r.user)return f("loginModal");if(await y())return m("account_suspended");if(!e)return;let a=r.user.uid,o=t.ref(`likes/${e}/${a}`);await t.ref(`products/${e}`).once("value",(async s=>{let i=s.val();if(!i)return;if((await t.ref(`users/${i.uid}/blockedUsers/${r.user.uid}`).once("value")).exists())return m("user_has_blocked_you");o.once("value",(o=>{let s={},n=o.exists()?-1:1;if(o.exists())s[`/likes/${e}/${a}`]=null;else{let o=u(`post-${e}`);if(o){let e=document.createElement("div");e.className="heart-anim",e.textContent="❤️",o.appendChild(e),setTimeout((()=>e.remove()),600)}s[`/likes/${e}/${a}`]=!0,i.uid!==a&&(s[`/notifications/${t.ref("notifications").push().key}`]={from:r.user.displayName||r.user.email,fromId:a,to:i.uid,type:"like",postId:e,ts:firebase.database.ServerValue.TIMESTAMP})}s[`/products/${e}/likes`]=firebase.database.ServerValue.increment(n),s[`/products/${e}/engagementScore`]=firebase.database.ServerValue.increment(n),t.ref().update(s)}))}))},D=async e=>{let t=u("comments-overlay"),a=!t.classList.contains("show");e&&(t.dataset.key=e),t.classList.toggle("show",a);let o=`products/${t.dataset.key}/comments`;if(a&&t.dataset.key){const e=(await firebase.database().ref(`products/${t.dataset.key}`).once("value")).val(),a=e?e.uid:null;P(o,a)}else!a&&r.activeListeners[o]&&(r.activeListeners[o].ref.off("child_added",r.activeListeners[o].addedCallback),r.activeListeners[o].ref.off("child_removed",r.activeListeners[o].removedCallback),delete r.activeListeners[o])},P=(e,a)=>{let o=u("comments-list");o.innerHTML=`<p style='text-align:center;'>${c("loading")}</p>`;let s=t.ref(e);s.once("value",(e=>{e.exists()||(o.innerHTML=`<p style='text-align:center;'>${c("no_comments_yet")}</p>`)}));let i=s.orderByChild("ts").on("child_added",(async e=>{o.querySelector("p")&&(o.innerHTML="");let t=e.val(),s=document.createElement("div");s.className="comment-item";let i=await g(t.user),n=i.photoURL||"https://img.icons8.com/ios/50/user.png";const l=t.user===r.user?.uid,d=a===r.user?.uid,u=r.user&&(l||d);s.innerHTML=`<img src="${n}" alt="">\n <div>\n <div style="display: flex; justify-content: space-between; align-items: center;">\n <strong>${i.displayName||c("unknown_user")}</strong>\n ${u?`<button class="delete-comment-btn" data-comment-id="${e.key}" style="background:none; border:none; color: var(--text-color-secondary); cursor:pointer; font-size: 18px;" title="${c("delete")}">🗑️</button>`:""}\n </div>\n <p>${t.text}</p>\n </div>`,o.prepend(s)})),n=e=>{let t=o.querySelector(`.comment-item[data-comment-id="${e.key}"]`);t&&t.remove(),0===o.children.length&&(o.innerHTML=`<p style='text-align:center;'>${c("no_comments_yet")}</p>`)};s.on("child_removed",n),r.activeListeners[e]={ref:s,addedCallback:i,removedCallback:n}},U=Object.fromEntries(Array.from(document.querySelectorAll("#country option")).filter((e=>e.value)).map((e=>[e.value,e.textContent]))),A=async e=>{$("profile-page"),r.activeListeners.profileFollowers&&(r.activeListeners.profileFollowers.ref.off("value",r.activeListeners.profileFollowers.callback),delete r.activeListeners.profileFollowers),r.activeListeners.blockStatus&&(r.activeListeners.blockStatus.ref.off("value",r.activeListeners.blockStatus.callback),delete r.activeListeners.blockStatus);let a=r.user&&r.user.uid===e;u("my-profile-actions").style.display=a?"flex":"none",u("user-profile-actions").style.display=a?"none":"flex",u("notFollowingBackBtn").style.display=a?"flex":"none";let o=await g(e),s=o.photoURL||"https://img.icons8.com/ios/100/user.png";u("profileAvatar").src=s,u("profileName").textContent=o.displayName||c("unknown_user"),u("profileEmail").textContent=o.email||"",u("profileBio").textContent=o.bio||"",u("my-reports-btn").onclick=w;let i=u("profileMediaGrid");i.innerHTML="";let n=document.createElement("div");n.style.display="flex",n.style.gap="10px",n.style.justifyContent="center",n.style.margin="20px auto";let l=document.createElement("button");l.textContent=c("load_media"),l.className="btn btn-primary",l.onclick=()=>{n.remove(),I(e,a)},n.appendChild(l),a||(r.user?(K(e),O(e),u("messageBtn").onclick=()=>Y(e)):(u("followBtn").onclick=()=>f("loginModal"),u("messageBtn").onclick=()=>f("loginModal")));let d=u("followersBtn"),p=u("notFollowingBackBtn"),m=u("followersCount"),_=u("notFollowingBackCount"),v=t.ref(`followers/${e}`),h=t.ref(`follows/${e}`),y=v.on("value",(e=>{m.textContent=e.numChildren()}));r.activeListeners.profileFollowers={ref:v,callback:y},Promise.all([h.once("value"),v.once("value")]).then((([e,t])=>{let a=e.val()||{},o=new Set(Object.keys(t.val()||{}));_.textContent=Object.keys(a).filter((e=>!o.has(e))).length})),a?(d.onclick=()=>b("followers",e),p.onclick=()=>b("not_following_back",e),d.disabled=!1,p.disabled=!1,i.appendChild(n)):(d.onclick=null,p.onclick=null,d.disabled=!0,p.disabled=!0,(()=>{{let t=document.createElement("button");t.textContent=c("report"),t.className="btn btn-secondary",t.onclick=()=>(async e=>{if(!r.user)return f("loginModal");let t=await g(e);u("reportedUserName").textContent=t.displayName||c("unknown_user"),u("reportedUserId").value=e,u("reportReason").value="",u("reportPostLink").value="",u("reportAdminNotes").value="",u("reportCurrentStatusDisplay").textContent=c("status_pending"),f("reportAbuseModal")})(e),n.appendChild(t)}})(),i.appendChild(n));let k=u("profileExtraInfo"),L=o.privacySettings||{};k.innerHTML="";let C=[];L.showAge&&o.dob&&C.push(`🎂 ${(e=>{if(!e)return 0;const t=new Date(e),a=new Date;let o=a.getFullYear()-t.getFullYear();const r=a.getMonth()-t.getMonth();return(r<0||0===r&&a.getDate()<t.getDate())&&o--,o})(o.dob)} ${c("age")}`),L.showGender&&o.gender&&"prefer_not_say"!==o.gender&&C.push(`${c(o.gender)}`),L.showCountry&&o.country&&U[o.country]&&C.push(`📍 ${U[o.country]}`),C.length>0&&(k.textContent=C.join(" | "))},N=e=>{$("home-page"),E(e),m("loading_post")},I=(e,a)=>{let o=u("profileMediaGrid");o.innerHTML=`<p>${c("loading")}</p>`,t.ref("products").orderByChild("uid").equalTo(e).once("value",(e=>{if(o.innerHTML="",!e.exists())return void(o.innerHTML=`<p>${c("no_media")}</p>`);let t=[];if(e.forEach((e=>{let a=e.val();"approved"===a.status&&t.push({key:e.key,...a})})),0===t.length)return void(o.innerHTML=`<p>${c("no_media")}</p>`);let r=document.createDocumentFragment();t.sort(((e,t)=>t.timestamp-e.timestamp)).forEach((e=>{let t=document.createElement("div");t.className="media-item",t.dataset.key=e.key,t.innerHTML=`\n <img src="${p(e.thumb,"q_auto:good,f_auto,w_400,c_fill,ar_1:1")}" loading="lazy" alt="${e.title||""}">\n <div class="media-item-views">\n <svg viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5C21.27 7.61 17 4.5 12 4.5zm0 12.5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path></svg>\n <span>${e.views||0}</span>\n </div>\n ${"video"===e.type?`<svg class="video-indicator" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"></path></svg><div class="media-item-title">${e.title||""}</div>`:""}\n ${a?`<div class="media-actions">\n <button data-action="edit" title="${c("edit_media")}">✏️</button>\n <button data-action="delete" title="${c("delete")}">🗑️</button>\n </div>`:""}`,r.appendChild(t)})),o.appendChild(r)})).catch((e=>{console.error("Error loading profile media:",e),o.innerHTML="<p>Error loading media.</p>"}))},F=(e=null,t={})=>{if(!r.user)return f("loginModal");u("uploadModal").dataset.editKey=e||"",u("uploadModalTitle").textContent=c(e?"edit_media":"upload_media"),u("title").value=t.title||"",u("desc").value=t.desc||"",t.type&&(u("type").value=t.type),u("mediaFileInput").value="",n=null,u("thumbnail-preview-container").classList.add("hidden"),u("thumbnailPreviewImage").src="",f("uploadModal")},B={};function H(){B.added&&B.added.ref.off("child_added",B.added.callback),B.removed&&B.removed.ref.off("child_removed",B.removed.callback),B={}}function V(e){let t=u("notif-badge");t.textContent=e.toString(),t.classList.toggle("hidden",0===e)}function j(e){e.postId?N(e.postId):"chat"===e.type&&e.fromId?Y(e.fromId):"report"===e.type&&e.fromId&&e.reportId?L(e.reportId,e.fromId):e.fromId&&A(e.fromId),t.ref("notifications/"+e.key).remove()}let z=h((async()=>{let e=u("searchInput").value.toLowerCase(),a=u("searchResults");if(a.innerHTML="",e.length<2)return;let o=await t.ref("products").orderByChild("timestamp").limitToLast(200).once("value");if(!o.exists())return;let r=document.createDocumentFragment(),s=[];o.forEach((t=>{let a=t.val();if("approved"===a.status&&(a.title.toLowerCase().includes(e)||a.desc.toLowerCase().includes(e))){let e=document.createElement("div");e.className="media-item",e.innerHTML=`\n <img src="${p(a.thumb,"q_auto:good,f_auto,w_400,c_fill")}" loading="lazy" alt="${a.title||""}">\n <div class="media-item-views">\n <svg viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5C21.27 7.61 17 4.5 12 4.5zm0 12.5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path></svg>\n <span>${a.views||0}</span>\n </div>\n `,e.onclick=()=>N(t.key),s.push(e)}})),s.reverse().forEach((e=>r.appendChild(e))),a.appendChild(r)}),500),K=e=>{let a=u("followBtn"),o=t.ref(`follows/${r.user.uid}/${e}`);r.activeListeners.follow&&r.activeListeners.follow.ref.off("value",r.activeListeners.follow.callback);let s=e=>{a.textContent=e.exists()?c("unfollow"):c("follow")};o.on("value",s),r.activeListeners.follow={ref:o,callback:s},a.onclick=async()=>{if(await y())return m("account_suspended");o.once("value",(a=>{let o={};if(a.exists())o[`/follows/${r.user.uid}/${e}`]=null,o[`/followers/${e}/${r.user.uid}`]=null;else{o[`/follows/${r.user.uid}/${e}`]=!0,o[`/followers/${e}/${r.user.uid}`]=!0;let a=t.ref("notifications").push().key,s={fromId:r.user.uid,to:e,type:"follow",ts:firebase.database.ServerValue.TIMESTAMP};o[`/notifications/${a}`]=s}t.ref().update(o)}))}},O=e=>{if(!r.user||r.user.uid===e)return;let a=u("blockBtn"),o=t.ref(`users/${r.user.uid}/blockedUsers/${e}`);r.activeListeners.blockStatus&&r.activeListeners.blockStatus.ref.off("value",r.activeListeners.blockStatus.callback);let s=e=>{e.exists()?(a.textContent=c("unblock"),a.style.backgroundColor="#27ae60"):(a.textContent=c("block"),a.style.backgroundColor="#a83232")};o.on("value",s),r.activeListeners.blockStatus={ref:o,callback:s},a.onclick=()=>{o.once("value",(a=>{let o={};a.exists()?o[`/users/${r.user.uid}/blockedUsers/${e}`]=null:o[`/users/${r.user.uid}/blockedUsers/${e}`]=!0,t.ref().update(o)}))}},Y=async e=>{if(!r.user)return f("loginModal");if((await t.ref(`users/${e}/blockedUsers/${r.user.uid}`).once("value")).exists())return m("user_has_blocked_you");if((await t.ref(`users/${r.user.uid}/blockedUsers/${e}`).once("value")).exists())return m("you_have_blocked_this_user");let a=r.user.uid;r.currentChat.chatId=a<e?`${a}_${e}`:`${e}_${a}`,r.currentChat.otherUid=e;let o=await g(e);u("chatWith").textContent=`${c("chat_with")} @${o?.displayName||c("unknown_user")}`;let s=u("chatMessages");s.innerHTML="";let i=`privateChats/${r.currentChat.chatId}/messages`;r.activeListeners.chat&&r.activeListeners.chat.ref.off("child_added",r.activeListeners.chat.callback);let n=t.ref(i),l=e=>{let t=e.val(),o=document.createElement("div");o.classList.add("chat-message"),o.classList.toggle("sent",t.from===a),o.classList.toggle("received",t.from!==a),o.textContent=t.text,s.appendChild(o),s.scrollTop=s.scrollHeight};n.orderByChild("ts").on("child_added",l),r.activeListeners.chat={ref:n,callback:l},f("privateChatModal")},G=async e=>{if(q(),Object.values(r.activeListeners).forEach((({ref:e,callback:t,event:a})=>e.off(a||"value",t))),r.activeListeners={},H(),J&&(J.ref.off("value",J.callback),J=null),r.user=e,r.user){let e=await g(r.user.uid);if(e&&e.isBlocked)return a.signOut(),void m("account_suspended",{},5e3);u("privacy-toast")?.classList.remove("show"),(()=>{const e=t.ref("notifications").orderByChild("to").equalTo(r.user.uid),a=e.on("value",(e=>V(e.numChildren())));J={ref:e,callback:a}})()}else u("notif-badge").classList.add("hidden"),$("home-page"),setTimeout((()=>{let e=u("privacy-toast");!r.user&&e&&(e.classList.add("show"),setTimeout((()=>e.classList.remove("show")),1e4))}),2e3);let o=new URLSearchParams(window.location.search).get("post");o?(N(o),history.replaceState(null,"",window.location.pathname)):E()},W=async()=>{if(!r.user)return;if(await y())return m("account_suspended");v("editProfileModal"),_(!0,"saving_data",10);let e=u("newAvatarFile").files?.[0],a={displayName:u("newDisplayName").value.trim(),bio:u("newBio").value.trim(),dob:u("newDob").value,gender:u("newGender").value,country:u("newCountry").value,privacySettings:{showAge:u("showAge").checked,showGender:u("showGender").checked,showCountry:u("showCountry").checked}};if(e)try{_(!0,"resizing_image",30);let t=await((e,t,a)=>new Promise(((o,r)=>{let s=new FileReader;s.readAsDataURL(e),s.onload=s=>{let i=new Image;i.src=s.target.result,i.onload=()=>{if(i.width<=t&&i.height<=a)return o(e);let r=document.createElement("canvas"),{width:s,height:n}=i;s>n?s>t&&(n=Math.round(n*(t/s)),s=t):n>a&&(s=Math.round(s*(a/n)),n=a),r.width=s,r.height=n,r.getContext("2d").drawImage(i,0,0,s,n),r.toBlob(o,"image/png",.9)},i.onerror=r},s.onerror=r})))(e,512,512);_(!0,"uploading_image",50);let o={folder:"avatars",public_id:`${r.user.uid}_${Date.now()}`};a.photoURL=await C(t,o)}catch(e){return m("upload_failed",{message:e.message}),void _(!1)}_(!0,"saving_data",90),await t.ref("users/"+r.user.uid).update(a);let o={};a.displayName&&(o.displayName=a.displayName),a.photoURL&&(o.photoURL=a.photoURL),Object.keys(o).length>0&&await r.user.updateProfile(o),delete s[r.user.uid],_(!1),m("profile_updated"),A(r.user.uid)},Q=async e=>{if(!e)return;const a=t.ref(`products/${e}`),o=await a.once("value");if(!o.exists())return;const r=o.val(),s=await g(r.uid),i={title:r.title||c("share_title"),text:c("share_text",{user:`@${s.displayName||"user"}`}),url:`${window.location.origin}${window.location.pathname}?post=${e}`};if(navigator.share)try{await navigator.share(i);let e={};e[`/products/${o.key}/shares`]=firebase.database.ServerValue.increment(1),e[`/products/${o.key}/engagementScore`]=firebase.database.ServerValue.increment(2),t.ref().update(e)}catch(e){console.log("Share was cancelled or failed",e)}else try{await navigator.clipboard.writeText(i.url),m("link_copied_to_clipboard")}catch(e){m("copy_link_failed")}},J=null;(e=>{d=e.startsWith("ar")?"ar":"en";let t="ar"===d?"rtl":"ltr";document.documentElement.lang=d,document.documentElement.dir=t,document.querySelectorAll("[data-translate-key]").forEach((e=>{e.textContent=c(e.dataset.translateKey)})),document.querySelectorAll("[data-translate-placeholder]").forEach((e=>{e.placeholder=c(e.dataset.translatePlaceholder)}))})(navigator.language||navigator.userLanguage),function(){a.onAuthStateChanged(G);let e=()=>{r.isAppMuted&&(r.isAppMuted=!1,m("audio_on",{},1500),i&&(i.muted=!1),document.body.removeEventListener("click",e),document.body.removeEventListener("touchstart",e))};document.body.addEventListener("click",e),document.body.addEventListener("touchstart",e),u("privacy-agree").addEventListener("change",(e=>{u("signup-btn").disabled=!e.target.checked})),u("privacy-link-in-modal").addEventListener("click",(e=>{e.preventDefault(),$("privacy-page")})),u("privacy-toast")?.addEventListener("click",(()=>{$("privacy-page"),u("privacy-toast").classList.remove("show")})),document.querySelectorAll(".nav-btn[data-page]").forEach((e=>{e.addEventListener("click",(()=>{let t=e.dataset.page;if(("profile-page"===t||"notifications-page"===t)&&!r.user)return f("loginModal");"profile-page"===t?A(r.user.uid):$(t)}))})),document.querySelectorAll("[data-modal-close]").forEach((e=>{e.addEventListener("click",(()=>v(e.dataset.modalClose)))})),u("newAvatarFile").addEventListener("change",(e=>{let t=e.target.files[0];if(t){let e=new FileReader;e.onload=e=>{u("avatarPreview").src=e.target.result},e.readAsDataURL(t)}})),u("mediaFileInput").addEventListener("change",(async e=>{let t=e.target.files?.[0],a=u("thumbnail-preview-container"),o=u("thumbnailPreviewImage");if(a.classList.add("hidden"),o.src="",n=null,t)if(t.type.startsWith("video/"))try{_(!0,"generating_thumbnail",0);let e=await((e,t,a)=>new Promise(((t,a)=>{let o=document.createElement("video"),r=document.createElement("canvas"),s=URL.createObjectURL(e);o.muted=!0,o.playsinline=!0,o.preload="metadata",o.crossOrigin="anonymous";let i=()=>{o.removeEventListener("seeked",n),o.removeEventListener("error",l),o.removeEventListener("loadedmetadata",d),URL.revokeObjectURL(s)},n=()=>{try{let{videoWidth:e,videoHeight:s}=o;e>s?e>512&&(s=Math.round(s*(512/e)),e=512):s>512&&(e=Math.round(e*(512/s)),s=512),r.width=e,r.height=s;let n=r.getContext("2d");if(!n)return i(),a(Error("Could not get canvas context."));n.drawImage(o,0,0,r.width,r.height),r.toBlob((e=>{i(),e?t(e):a(Error("Canvas to Blob conversion failed"))}),"image/jpeg",.8)}catch(e){i(),a(e)}},l=e=>{i(),a(Error("Video loading error"))},d=()=>{o.currentTime=1};o.addEventListener("loadedmetadata",d),o.addEventListener("seeked",n),o.addEventListener("error",l),o.src=s})))(t);n=e,o.src=URL.createObjectURL(e),a.classList.remove("hidden"),_(!1)}catch(e){console.error("Thumbnail generation failed:",e),m("upload_failed",{message:"Could not generate thumbnail."}),_(!1)}else t.type.startsWith("image/")&&(o.src=URL.createObjectURL(t),a.classList.remove("hidden"))})),u("submitReportBtn").addEventListener("click",(async()=>{if(!r.user)return f("loginModal");if(await y())return m("account_suspended");let e=u("reportedUserId").value,a=u("reportReason").value.trim(),o=u("reportPostLink").value.trim();if(!a)return m("report_reason_required");v("reportAbuseModal"),_(!0,"submitting_report",50);let s={reporterUid:r.user.uid,reportedUid:e,reason:a,postLink:o,timestamp:firebase.database.ServerValue.TIMESTAMP,status:"pending"};try{await t.ref(`users/${r.user.uid}/reports`).push(s),m("report_submitted_success")}catch(e){console.error("Failed to submit report:",e),m("report_submit_failed")}finally{_(!1)}})),u("saveReportChangesBtn").addEventListener("click",(async()=>{let e=u("reportDetailModal").dataset.reportId,a=u("reportDetailModal").dataset.reporterUid;if(!e||!a)return;let o={adminResponse:u("reportAdminResponse").value,status:u("reportStatusSelect").value};try{await t.ref(`users/${a}/reports/${e}`).update(o),v("reportDetailModal"),m("report_updated")}catch(e){console.error("Failed to update report:",e),m("report_update_failed")}})),u("resolveReportBtn").addEventListener("click",(async()=>{const e=u("reportDetailModal").dataset.reportId,a=u("reportDetailModal").dataset.reporterUid;if(!e||!a||!r.user)return;const o=t.ref(`users/${a}/reports/${e}`),s=await o.once("value");if(!s.exists()||s.val().reporterUid!==r.user.uid)return m("error_not_owner");const i={status:"resolved",adminResponse:s.val().adminResponse?s.val().adminResponse+"\n(Resolved by user)":"(Resolved by user)"};try{await o.update(i),v("reportDetailModal"),m("report_marked_resolved"),u("reports-page").classList.contains("active")&&w()}catch(e){console.error("Failed to resolve report:",e),m("report_resolve_failed")}})),u("submit-deletion-request-btn").addEventListener("click",(async()=>{if(!r.user)return f("loginModal");if(await y())return m("account_suspended");const e=u("deletionRequestReason").value.trim();if(!e)return m("reason_required");v("requestDeletionModal"),_(!0,"submitting_report",50);const a={uid:r.user.uid,email:r.user.email,displayName:r.user.displayName,reason:e,timestamp:firebase.database.ServerValue.TIMESTAMP,status:"pending",adminNotes:""};try{await t.ref(`users/${r.user.uid}/deletionRequest`).set(a),m("deletion_request_submitted")}catch(e){console.error("Failed to submit deletion request:",e),m("deletion_request_failed")}finally{_(!1)}})),u("forgot-password-link").addEventListener("click",(e=>{e.preventDefault(),v("loginModal"),f("resetPasswordModal")})),u("comments-list").addEventListener("click",(async e=>{const a=e.target.closest(".delete-comment-btn");if(a){if(await y())return m("account_suspended");const e=u("comments-overlay").dataset.key,o=a.dataset.commentId;e&&o&&confirm(c("delete_comment_confirm"))&&t.ref(`products/${e}/comments/${o}`).remove().then((()=>m("comment_deleted"))).catch((e=>{console.error("Comment deletion failed:",e),m("comment_delete_failed")}))}})),document.body.addEventListener("click",(e=>{let s=e.target,i=s.closest("button"),l=s.closest(".media-item");if(!l||s.closest(".media-actions button")){if(i){switch(i.id){case"login-btn":a.signInWithEmailAndPassword(u("email").value,u("password").value).then((e=>{v("loginModal")})).catch((e=>m(e.message)));break;case"signup-btn":return r.signupData.email=u("email").value,r.signupData.password=u("password").value,r.signupData.email&&r.signupData.password?void f("additionalInfoModal"):m("email_password_required");case"complete-signup-btn":const e=u("dob").value;if(!e)return m("dob_required");{const o=new Date(e),s=new Date;let i=s.getFullYear()-o.getFullYear();const n=s.getMonth()-o.getMonth();if((n<0||0===n&&s.getDate()<o.getDate())&&i--,i<13)return m("underage_error");{const o=u("gender").value,s=u("country").value,{email:i,password:n}=r.signupData;a.createUserWithEmailAndPassword(i,n).then((i=>{const n=i.user;n.sendEmailVerification().then((()=>{m("verification_sent",{},6e3),a.signOut()})),t.ref("users/"+n.uid).set({email:n.email,displayName:n.email.split("@")[0],photoURL:"",bio:"",dob:e,gender:o,country:s}),v("additionalInfoModal"),v("loginModal"),r.signupData={}})).catch((e=>m(e.message)))}}break;case"google-login-btn":a.signInWithPopup(o).then((e=>{let a=e.user,o=t.ref("users/"+a.uid);o.once("value",(e=>{e.exists()||o.set({email:a.email,displayName:a.displayName,photoURL:a.photoURL,bio:""})})),v("loginModal")})).catch((e=>{console.error("Google Sign-In Error:",e);let t=e.code||"Error";"auth/unauthorized-domain"===e.code&&(t="google_auth_domain_error"),m(t,{},6e3)}));break;case"logout-btn":a.signOut(),m("logged_out");break;case"send-comment-btn":(async()=>{if(!r.user)return f("loginModal");if(await y())return m("account_suspended");let e=u("comments-overlay").dataset.key,a=u("comment-input"),o=a.value.trim();if(!o||!e)return;let s=t.ref(`products/${e}`);await s.once("value",(async s=>{let i=s.val();if(!i)return;if((await t.ref(`users/${i.uid}/blockedUsers/${r.user.uid}`).once("value")).exists())return m("user_has_blocked_you");let n=t.ref(`products/${e}/comments`).push().key,l={},d={user:r.user.uid,text:o,ts:firebase.database.ServerValue.TIMESTAMP};l[`/products/${e}/comments/${n}`]=d,i.uid!==r.user.uid&&(l[`/notifications/${t.ref("notifications").push().key}`]={fromId:r.user.uid,to:i.uid,type:"comment",postId:e,ts:firebase.database.ServerValue.TIMESTAMP}),l[`/products/${e}/engagementScore`]=firebase.database.ServerValue.increment(3),t.ref().update(l),a.value=""}))})();break;case"edit-profile-btn":(async()=>{if(!r.user)return;let e=await g(r.user.uid),t=e.photoURL||"https://img.icons8.com/ios/100/user.png";u("avatarPreview").src=t,u("newDisplayName").value=e.displayName||"",u("newBio").value=e.bio||"",u("newDob").value=e.dob||"",u("newGender").value=e.gender||"",u("newCountry").value=e.country||"";let a=e.privacySettings||{};u("showAge").checked=a.showAge||!1,u("showGender").checked=a.showGender||!1,u("showCountry").checked=a.showCountry||!1,u("newAvatarFile").value="",f("editProfileModal")})();break;case"saveProfileBtn":W();break;case"nav-upload-btn":F();break;case"save-upload-btn":(async()=>{if(!r.user)return f("loginModal");if(await y())return m("account_suspended");let e=u("uploadModal").dataset.editKey,a=u("mediaFileInput").files?.[0],o=u("type").value;if(!a&&!e)return m("file_required");v("uploadModal"),_(!0,"uploading",10);let s=e?await t.ref(`products/${e}`).once("value").then((e=>e.val())):{},i=s?.mediaUrl||null,l=s?.thumb||null;try{if(a)if("video"===o){_(!0,"generating_thumbnail",20);let e=n;if(!e)throw Error("Thumbnail not generated. Please re-select the file.");_(!0,"uploading_files",40);let t=`video_thumbnail_${r.user.uid}_${Date.now()}`,[o,s]=await Promise.all([C(a),C(e,{folder:"post_thumbnails",public_id:t})]);i=o,l=s}else _(!0,"uploading_image",40),l=i=await C(a)}catch(e){return console.error("Upload failed:",e),m("upload_failed",{message:e.message||"Unknown error"}),void _(!1)}_(!0,"saving_data",90);let d={title:u("title").value,desc:u("desc").value,type:o,mediaUrl:i,thumb:l,uid:r.user.uid,timestamp:firebase.database.ServerValue.TIMESTAMP,status:"pending",likes:s?.likes||0,views:s?.views||0,shares:s?.shares||0,engagementScore:s?.engagementScore||0},c=e?t.ref("products/"+e):t.ref("products").push();await c.set(d),_(!1),m("upload_success"),u("profile-page").classList.contains("active")&&I(r.user.uid,!0)})();break;case"confirmDelete":r.deleteKey&&r.user&&t.ref("products/"+r.deleteKey).remove().then((()=>{m("deleted_successfully"),I(r.user.uid,!0)})),v("deleteToast"),r.deleteKey=null;break;case"cancelDelete":v("deleteToast"),r.deleteKey=null;break;case"sendChatBtn":(async()=>{if(!r.user)return f("loginModal");if(await y())return m("account_suspended");let e=u("chatInput"),a=e.value.trim();if(!a||!r.currentChat.chatId)return;let o={},s=t.ref(`privateChats/${r.currentChat.chatId}/messages`).push().key,i={from:r.user.uid,to:r.currentChat.otherUid,text:a,ts:firebase.database.ServerValue.TIMESTAMP};o[`/privateChats/${r.currentChat.chatId}/messages/${s}`]=i;let n=t.ref("notifications").push().key,l={fromId:r.user.uid,to:r.currentChat.otherUid,type:"chat",ts:firebase.database.ServerValue.TIMESTAMP};o[`/notifications/${n}`]=l,t.ref().update(o),e.value=""})();break;case"privacy-policy-btn":$("privacy-page");break;case"request-deletion-btn":(async()=>{if(!r.user)return;let e=u("requestDeletionModalTitle"),a=u("deletionRequestReason"),o=u("submit-deletion-request-btn"),s=u("deletionStatusContainer"),i=u("deletionRequestStatus"),n=u("deletionRequestAdminNotes"),l=u("confirm-radical-delete-btn"),d=u("undo-deletion-request-btn"),p=(await t.ref(`users/${r.user.uid}/deletionRequest`).once("value")).val(),m=await g(r.user.uid);u("deletionRequestUid").textContent=r.user.uid,u("deletionRequestEmail").textContent=m.email||"N/A",u("deletionRequestName").textContent=m.displayName||"N/A",o.classList.add("hidden"),l.classList.add("hidden"),d.classList.add("hidden"),p?(e.textContent=c("deletion_request_status_title"),a.value=p.reason,a.disabled=!0,n.value=p.adminNotes||"",i.textContent=c(`status_${p.status}`,{defaultValue:p.status}),s.classList.remove("hidden"),"approved_for_deletion"===p.status&&(l.classList.remove("hidden"),d.classList.remove("hidden"))):(e.textContent=c("request_deletion_title"),a.value="",a.disabled=!1,n.value="",s.classList.add("hidden"),o.classList.remove("hidden")),f("requestDeletionModal")})();break;case"undo-deletion-request-btn":r.user&&t.ref(`users/${r.user.uid}/deletionRequest`).remove().then((()=>{m("undo_request_success"),v("requestDeletionModal")})).catch((e=>m(e.message)));break;case"confirm-radical-delete-btn":(async()=>{if(r.user&&confirm(c("radical_delete_confirm"))){v("requestDeletionModal"),_(!0,"deleting_account",10);try{const e=r.user.uid,a=(await t.ref("products").orderByChild("uid").equalTo(e).once("value")).val(),o={};if(o[`/users/${e}`]=null,a)for(const e in a)o[`/products/${e}`]=null,o[`/likes/${e}`]=null;_(!0,"deleting_data",50),await t.ref().update(o),_(!0,"deleting_authentication",90),await r.user.delete()}catch(e){console.error("Radical deletion failed:",e),"auth/requires-recent-login"===e.code?(m("radical_delete_reauth_required",{},5e3),a.signOut()):m("radical_delete_failed"),_(!1)}}})();break;case"send-reset-link-btn":(()=>{let e=u("reset-email").value.trim();e?a.sendPasswordResetEmail(e).then((()=>{v("resetPasswordModal"),m("reset_email_sent")})).catch((e=>{"auth/user-not-found"===e.code?m("reset_email_failed_user_not_found"):m(e.message)})):m("email_required")})()}if(l&&i.dataset.action){e.stopPropagation();let a=l.dataset.key;"edit"===i.dataset.action?(e=>{t.ref("products/"+e).once("value",(t=>{t.exists()&&F(e,t.val())}))})(a):"delete"===i.dataset.action&&(e=>{r.deleteKey=e,f("deleteToast")})(a)}}}else N(l.dataset.key)})),document.body.addEventListener("click",(e=>{let t=u("comments-overlay");!(e=>u(e).classList.contains("show"))("comments-overlay")||t.contains(e.target)||u("ui-comment-btn").contains(e.target)||D()}),!0),u("searchInput").addEventListener("input",z)}()}))</script><script type=module src=/index.tsx></script><script type="module" src="/index.tsx"></script></body></html>
